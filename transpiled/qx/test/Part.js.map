{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/Part.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "test",
    "io",
    "MRemoteTest",
    "members",
    "testLoaderStructureParsing",
    "loader",
    "parts",
    "packages",
    "uris",
    "closureParts",
    "boot",
    "partLoader",
    "Part",
    "getParts",
    "assertEquals",
    "Object",
    "keys",
    "length",
    "juhu",
    "kinners",
    "assertInstance",
    "part",
    "ClosurePart",
    "getPackages",
    "getId",
    "pkg2",
    "pkg2Urls",
    "getUrls",
    "refUrls",
    "s",
    "assertMatch",
    "RegExp",
    "testPreload",
    "PART_FILES",
    "p0",
    "p1",
    "getUrl",
    "$$instance",
    "self",
    "window",
    "setTimeout",
    "resume",
    "assertJsonEquals",
    "getReadyState",
    "execute",
    "preload",
    "wait",
    "testPreloadCallback",
    "preloadExecuted",
    "states",
    "testPreloadAndLoadAfterwards",
    "loadClosure",
    "fail",
    "require",
    "testRequireState",
    "p2",
    "timeout",
    "TIMEOUT",
    "testRequireUnknownPart",
    "assertException",
    "Error"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\nqooxdoo - the new era of web development\n\nhttp://qooxdoo.org\n\nCopyright:\n  2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\nLicense:\n     MIT: https://opensource.org/licenses/MIT\n  See the LICENSE file in the project's top-level directory for details.\n\nAuthors:\n  * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n/**\n * @asset(qx/test/*)\n * @ignore(qx.test.PART_FILES.*)\n */\n\nqx.Class.define(\"qx.test.Part\",\n{\n  extend : qx.dev.unit.TestCase,\n  include : qx.test.io.MRemoteTest,\n\n  members :\n  {\n    testLoaderStructureParsing : function()\n    {\n      var loader = {\n        parts : {\n          \"juhu\" : [0, 1],\n          \"kinners\" : [0, 2]\n        },\n        packages : {\n          0 : {uris : [\"1.js\"]},\n          1 : {uris : [\"2.js\"]},\n          2 : {uris : [\"3.1.js\", \"3.2.js\"]}\n        },\n        closureParts : {\"juhu\": true},\n        boot: \"juhu\"\n      };\n\n      var partLoader = new qx.Part(loader);\n\n      // get the parts\n      var parts = partLoader.getParts();\n      this.assertEquals(2, Object.keys(parts).length);\n      var juhu = parts[\"juhu\"];\n      var kinners = parts[\"kinners\"];\n\n      // check part instances\n      this.assertInstance(juhu, qx.io.part.ClosurePart);\n      this.assertInstance(kinners, qx.io.part.Part);\n\n      // confirm part packages\n      var packages = kinners.getPackages();\n      this.assertEquals(2, packages.length);\n\n      this.assertEquals(\"0\", packages[0].getId());\n      this.assertEquals(\"2\", packages[1].getId());\n\n      // check package uris\n      var pkg2     = packages[1];\n      var pkg2Urls = pkg2.getUrls();\n      var refUrls  = loader.packages[2].uris;\n      for (var s=0; s<refUrls.length; s++){\n        this.assertMatch(pkg2Urls[s], new RegExp(refUrls[s] + \".*\")); // matches \"?nocache=...\" if present\n      }\n    },\n\n\n    testPreload : function()\n    {\n      qx.test.PART_FILES = [];\n\n      var loader = {\n        parts : {\n          \"juhu\" : [\"p1\"],\n          \"affe\" : [\"p0\"]\n        },\n        packages : {\n          p0 : { uris : [\"boot.js\"]},\n          p1 : { uris : [this.getUrl(\"qx/test/part/file1-closure.js\")]}\n        },\n        closureParts : {\"juhu\": true},\n        boot: \"affe\"\n      };\n\n      var partLoader = new qx.Part(loader);\n      qx.Part.$$instance = partLoader;\n\n      var self = this;\n      var part = partLoader.getParts()[\"juhu\"];\n      window.setTimeout(function() {\n        self.resume(function() {\n          self.assertEquals(0, qx.test.PART_FILES.length);\n          self.assertJsonEquals([], qx.test.PART_FILES);\n\n          self.assertEquals(\"initialized\", part.getReadyState());\n          self.assertEquals(\"cached\", part.getPackages()[0].getReadyState());\n\n          // execute closure to check if it is the correct one\n          part.getPackages()[0].execute();\n          self.assertJsonEquals([\"file1-closure\"], qx.test.PART_FILES);\n        });\n      }, 1000);\n\n      partLoader.preload(\"juhu\");\n\n      this.wait();\n    },\n\n\n    testPreloadCallback : function()\n    {\n      qx.test.PART_FILES = [];\n\n      var loader = {\n        parts : {\n          \"juhu\" : [\"p1\"],\n          \"affe\" : [\"p0\"]\n        },\n        packages : {\n          p0 : { uris : [\"boot.js\"]},\n          p1 : { uris : [this.getUrl(\"qx/test/part/file1-closure.js\")]}\n        },\n        closureParts : {\"juhu\": true},\n        boot: \"affe\"\n      };\n\n      var partLoader = new qx.Part(loader);\n      qx.Part.$$instance = partLoader;\n\n      var self = this;\n      var preloadExecuted = false;\n      partLoader.preload([\"affe\", \"juhu\"], function(states) {\n        self.resume(function() {\n          preloadExecuted = true;\n          self.assertEquals(self, this, \"context wrong\");\n          self.assertEquals(\"complete\", states[0], \"states wrong\");\n          self.assertEquals(\"initialized\", states[1], \"states wrong\");\n        }, self);\n      }, this);\n\n      this.wait();\n    },\n\n\n    testPreloadAndLoadAfterwards : function()\n    {\n      qx.test.PART_FILES = [];\n\n      var loader = {\n        parts : {\n          \"juhu\" : [\"p1\"],\n          \"affe\" : [\"p0\"]\n        },\n        packages : {\n          p0 : { uris : [\"boot.js\"]},\n          p1 : { uris : [this.getUrl(\"qx/test/part/file1-closure.js\")]}\n        },\n        closureParts : {\"juhu\": true},\n        boot: \"affe\"\n      };\n\n      var partLoader = new qx.Part(loader);\n      qx.Part.$$instance = partLoader;\n\n      partLoader.preload(\"juhu\");\n\n      var part = partLoader.getParts()[\"juhu\"];\n      var self = this;\n      part.getPackages()[0].loadClosure = function() {\n        self.resume(function() {\n          self.fail(\"load called twice!\");\n        });\n      };\n\n      partLoader.require(\"juhu\", function() {\n        this.resume(function() {\n          this.assertEquals(\"complete\", part.getPackages()[0].getReadyState());\n          this.assertEquals(\"complete\", part.getReadyState());\n\n          this.assertEquals(1, qx.test.PART_FILES.length);\n          this.assertJsonEquals([\"file1-closure\"], qx.test.PART_FILES);\n        });\n      }, this);\n\n      this.wait();\n    },\n\n\n    testRequireState : function()\n    {\n      qx.test.PART_FILES = [];\n\n      // create a dummy loader\n      var loader = {\n        parts : {\n          \"juhu\" : [\"p1\"],\n          \"affe\" : [\"p0\"],\n          \"fail\" : [\"p2\"]\n        },\n        packages : {\n          p0 : { uris : [\"boot.js\"]},\n          p1 : { uris : [this.getUrl(\"qx/test/part/file1-closure.js\")]},\n          p2 : { uris : [\"_fail.js\"]}\n        },\n        closureParts : {\"juhu\": true, \"fail\" : true},\n        boot: \"affe\"\n      };\n\n      var partLoader = new qx.Part(loader);\n      qx.Part.$$instance = partLoader;\n\n      // preload one part\n      partLoader.preload(\"juhu\");\n\n      var timeout = qx.Part.TIMEOUT;\n      qx.Part.TIMEOUT = 1000;\n\n      // require all three parts and check the ready states\n      partLoader.require([\"affe\", \"juhu\", \"fail\"], function(states) {\n        this.resume(function() {\n          qx.Part.TIMEOUT = timeout;\n          this.assertEquals(\"complete\", states[0]);\n          this.assertEquals(\"complete\", states[1]);\n          this.assertEquals(\"error\", states[2]);\n\n          delete qx.Part.$$instance;\n        }, this);\n      }, this);\n\n      this.wait();\n    },\n\n    testRequireUnknownPart: function () {\n      qx.test.PART_FILES = [];\n\n      // create a dummy loader\n      var loader = {\n        parts : {\n          \"affe\" : [\"p0\"]\n        },\n        packages : {\n          p0 : { uris : [\"boot.js\"]}\n        },\n        boot: \"affe\"\n      };\n\n      var partLoader = new qx.Part(loader);\n      qx.Part.$$instance = partLoader;\n\n      // require unknown part\n      this.assertException(function () {\n        partLoader.require(['unknown']);\n      }, Error);\n\n      delete qx.Part.$$instance;\n    }\n  }\n});\n"
  ]
}