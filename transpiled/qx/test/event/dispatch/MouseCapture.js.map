{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/event/dispatch/MouseCapture.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "members",
    "setUp",
    "root",
    "dom",
    "Element",
    "create",
    "id",
    "document",
    "body",
    "appendChild",
    "innerHTML",
    "c_1",
    "getElementById",
    "c_1_1",
    "c_2",
    "registration",
    "removeManager",
    "getHandlers",
    "test",
    "event",
    "dispatch",
    "TestingHandler",
    "getDispatchers",
    "MouseCapture",
    "DomBubbling",
    "Direct",
    "fireEvent",
    "target",
    "type",
    "clazz",
    "args",
    "Registration",
    "createEvent",
    "manager",
    "dispatchEvent",
    "window",
    "TestingWindow",
    "Manager",
    "capture",
    "getDispatcher",
    "called",
    "addListener",
    "logEvent",
    "tearDown",
    "Reg",
    "removeAllListeners",
    "removeChild",
    "dispose",
    "e",
    "push",
    "getCurrentTarget",
    "onLoseCapture",
    "fire",
    "bubble",
    "Event",
    "testNoCapture",
    "assertEquals",
    "join",
    "testContainerCapture",
    "activateCapture",
    "testNoContainerCapture",
    "testCaptureBubbling",
    "testLoseCaptureOnClick",
    "testLoseCaptureOnWindowBlur",
    "testLoseCaptureOnWindowFocus",
    "testLoseCaptureOnWindowScroll",
    "testLoseCaptureOnCaptureChange"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2009 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\nqx.Class.define(\"qx.test.event.dispatch.MouseCapture\",\n{\n  extend : qx.dev.unit.TestCase,\n\n  members :\n  {\n    setUp : function()\n    {\n      var root = qx.dom.Element.create(\"div\", {id: \"root\"});\n      document.body.appendChild(root);\n\n      // root\n      //   c_1\n      //     c_1_1\n      //   c_2\n\n      root.innerHTML =\n        \"<div id='c_1'>\" +\n        \"<div id='c_1_1'></div>\" +\n        \"</div>\" +\n        \"<div id='c_2'>\";\n\n      this.c_1 = document.getElementById(\"c_1\");\n      this.c_1_1 = document.getElementById(\"c_1_1\");\n      this.c_2 = document.getElementById(\"c_2\");\n\n      var registration = {\n        removeManager : function() {},\n        getHandlers : function() {\n          return [qx.test.event.dispatch.TestingHandler];\n        },\n        getDispatchers : function() {\n          return [\n            qx.event.dispatch.MouseCapture,\n            qx.event.dispatch.DomBubbling,\n            qx.event.dispatch.Direct\n          ];\n        },\n        fireEvent : function(target, type, clazz, args) {\n          var event = qx.event.Registration.createEvent(type, clazz, args);\n          return manager.dispatchEvent(target, event);\n        }\n      };\n\n      this.window = new qx.test.event.dispatch.TestingWindow();\n\n      var manager = this.manager = new qx.event.Manager(this.window, registration);\n      this.capture = this.manager.getDispatcher(qx.event.dispatch.MouseCapture);\n\n      this.called = [];\n      this.manager.addListener(this.c_1, \"mousemove\", this.logEvent, this);\n      this.manager.addListener(this.c_1_1, \"mousemove\", this.logEvent, this);\n      this.manager.addListener(this.c_2, \"mousemove\", this.logEvent, this);\n    },\n\n\n    tearDown : function()\n    {\n      var Reg = qx.event.Registration;\n\n      Reg.removeAllListeners(this.c_1);\n      Reg.removeAllListeners(this.c_1_1);\n      Reg.removeAllListeners(this.c_2);\n\n      document.body.removeChild(document.getElementById(\"root\"));\n\n      this.manager.dispose();\n      this.window.dispose();\n    },\n\n\n    logEvent : function(e) {\n      this.called.push(e.getCurrentTarget().id);\n    },\n\n\n    onLoseCapture : function() {\n      this.called.push(\"losecapture\");\n    },\n\n\n    fire : function(target, type, bubble)\n    {\n      var event = qx.event.Registration.createEvent(type, qx.event.type.Event, [bubble !== false]);\n      this.manager.dispatchEvent(target, event);\n    },\n\n\n    testNoCapture : function()\n    {\n      this.fire(this.c_1_1, \"mousemove\");\n      this.assertEquals(\"c_1_1,c_1\", this.called.join(\",\"));\n    },\n\n\n    testContainerCapture : function()\n    {\n      this.capture.activateCapture(this.c_1, true);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.assertEquals(\"c_1\", this.called.join(\",\"));\n\n      this.called = [];\n      this.fire(this.c_1_1, \"mousemove\");\n      this.assertEquals(\"c_1\", this.called.join(\",\"));\n\n      this.called = [];\n      this.fire(this.c_2, \"mousemove\");\n      this.assertEquals(\"c_1\", this.called.join(\",\"));\n    },\n\n\n    testNoContainerCapture : function()\n    {\n      this.capture.activateCapture(this.c_1, false);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.assertEquals(\"c_1\", this.called.join(\",\"));\n\n      this.called = [];\n      this.fire(this.c_1_1, \"mousemove\");\n      this.assertEquals(\"c_1_1,c_1\", this.called.join(\",\"));\n\n      this.called = [];\n      this.fire(this.c_2, \"mousemove\");\n      this.assertEquals(\"c_1\", this.called.join(\",\"));\n    },\n\n\n    testCaptureBubbling : function()\n    {\n      this.capture.activateCapture(this.c_1_1, true);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.assertEquals(\"c_1_1,c_1\", this.called.join(\",\"));\n    },\n\n\n    testLoseCaptureOnClick : function()\n    {\n      this.manager.addListener(this.c_1, \"losecapture\", this.onLoseCapture, this);\n      this.capture.activateCapture(this.c_1, true);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.fire(this.c_2, \"click\");\n      this.assertEquals(\"c_1,losecapture\", this.called.join(\",\"));\n    },\n\n\n    testLoseCaptureOnWindowBlur : function()\n    {\n      this.manager.addListener(this.c_1, \"losecapture\", this.onLoseCapture, this);\n      this.capture.activateCapture(this.c_1, true);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.fire(this.window, \"blur\", false);\n      this.assertEquals(\"c_1,losecapture\", this.called.join(\",\"));\n    },\n\n\n    testLoseCaptureOnWindowFocus : function()\n    {\n      this.manager.addListener(this.c_1, \"losecapture\", this.onLoseCapture, this);\n      this.capture.activateCapture(this.c_1, true);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.fire(this.window, \"focus\", false);\n      this.assertEquals(\"c_1,losecapture\", this.called.join(\",\"));\n    },\n\n\n    testLoseCaptureOnWindowScroll : function()\n    {\n      this.manager.addListener(this.c_1, \"losecapture\", this.onLoseCapture, this);\n      this.capture.activateCapture(this.c_1, true);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.fire(this.window, \"scroll\", false);\n      this.assertEquals(\"c_1,losecapture\", this.called.join(\",\"));\n    },\n\n\n    testLoseCaptureOnCaptureChange : function()\n    {\n      this.manager.addListener(this.c_1, \"losecapture\", this.onLoseCapture, this);\n      this.capture.activateCapture(this.c_1, true);\n\n      this.called = [];\n      this.fire(this.c_1, \"mousemove\");\n      this.capture.activateCapture(this.c_2, true);\n      this.assertEquals(\"c_1,losecapture\", this.called.join(\",\"));\n    }\n  }\n});\n"
  ]
}