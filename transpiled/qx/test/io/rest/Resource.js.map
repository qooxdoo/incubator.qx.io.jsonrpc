{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/io/rest/Resource.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MRequirements",
    "MMock",
    "members",
    "setUp",
    "setUpDoubleRequest",
    "setUpResource",
    "io",
    "request",
    "Xhr",
    "restore",
    "req",
    "shallowStub",
    "AbstractRequest",
    "injectStub",
    "__reqs",
    "push",
    "res",
    "dispose",
    "rest",
    "Resource",
    "map",
    "tearDown",
    "getSandbox",
    "forEach",
    "configureRequest",
    "lang",
    "Function",
    "bind",
    "assertCalledWith",
    "setMethod",
    "assertCalled",
    "setUrl",
    "assertNotCalled",
    "send",
    "get",
    "params",
    "data",
    "callback",
    "spy",
    "_action",
    "_params",
    "_data",
    "assertEquals",
    "_getRequestConfig",
    "method",
    "url",
    "setBaseUrl",
    "assertFunction",
    "require",
    "popular",
    "assertException",
    "Error",
    "invoke",
    "id",
    "stub",
    "returns",
    "description",
    "check",
    "create",
    "result",
    "assertSend",
    "assertNumber",
    "req1",
    "req2",
    "post",
    "assertCalledOnce",
    "getSuccess",
    "addListener",
    "respond",
    "assertCalledTwice",
    "put",
    "article",
    "setRequestData",
    "commentId",
    "setRequestHeader",
    "getRequestHeader",
    "Json",
    "location",
    "stringify",
    "getMethod",
    "withArgs",
    "page",
    "size",
    "tag",
    "REQUIRED",
    "photo",
    "setting",
    "core",
    "Environment",
    "abort",
    "refresh",
    "sandbox",
    "useFakeTimers",
    "_resource",
    "poll",
    "clock",
    "tick",
    "undefined",
    "msg",
    "timer",
    "stop",
    "restart",
    "responses",
    "e",
    "getData",
    "longPoll",
    "assertArrayEquals",
    "i",
    "assertCallCount",
    "handlerId",
    "removeListenerById",
    "that",
    "assertEventFired",
    "getAction",
    "assertIdentical",
    "getRequest",
    "assertInteger",
    "getId",
    "respondError",
    "getPhase",
    "setTimeout",
    "resume",
    "wait",
    "skip",
    "RequirementError",
    "hasDebug",
    "response",
    "isDone",
    "getResponse",
    "fireEvent",
    "phase",
    "test"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n     * Richard Sternagel (rsternagel)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n/**\n *\n * @asset(qx/test/xmlhttp/*)\n */\n\nqx.Class.define(\"qx.test.io.rest.Resource\",\n{\n  extend: qx.dev.unit.TestCase,\n\n  include : [qx.dev.unit.MRequirements,\n             qx.dev.unit.MMock],\n\n  members:\n  {\n    setUp: function() {\n      this.setUpDoubleRequest();\n      this.setUpResource();\n    },\n\n    setUpDoubleRequest: function() {\n      // Restore Xhr when wrapped before\n      if (typeof qx.io.request.Xhr.restore == \"function\") {\n        qx.io.request.Xhr.restore();\n      }\n\n      var req = this.req = new qx.io.request.Xhr();\n\n      // Stub request methods, leave event system intact\n      req = this.shallowStub(req, qx.io.request.AbstractRequest);\n\n      // Inject double and return\n      this.injectStub(qx.io.request, \"Xhr\", req);\n\n      // Remember request for later disposal\n      this.__reqs = this.__reqs || [];\n      this.__reqs.push(this.req);\n\n      return req;\n    },\n\n    setUpResource: function() {\n      this.res && this.res.dispose();\n      var res = this.res = new qx.io.rest.Resource();\n\n      // Default routes\n      res.map(\"get\", \"GET\", \"/photos\");\n      res.map(\"post\", \"POST\", \"/photos\");\n    },\n\n    tearDown: function() {\n      this.getSandbox().restore();\n      this.res.dispose();\n      this.__reqs.forEach(function(req) {\n        req.dispose();\n      });\n    },\n\n\n    //\n    // Configuration\n    //\n\n    \"test: configure request receives pre-configured but unsent request\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.configureRequest(qx.lang.Function.bind(function(req) {\n        this.assertCalledWith(req.setMethod, \"GET\");\n        this.assertCalled(req.setUrl, \"/photos\");\n        this.assertNotCalled(req.send);\n      }, this));\n\n      res.get();\n    },\n\n    \"test: configure request receives invocation details\": function() {\n      var res = this.res,\n          req = this.req,\n          params = {},\n          data = {},\n          callback;\n\n      callback = this.spy(qx.lang.Function.bind(function(req, _action, _params, _data) {\n        this.assertEquals(\"get\", _action, \"Unexpected action\");\n        this.assertEquals(params, _params, \"Unexpected params\");\n        this.assertEquals(data, _data, \"Unexpected data\");\n      }, this));\n      res.configureRequest(callback);\n\n      res.get(params, data);\n      this.assertCalled(callback);\n    },\n\n    //\n    // Route\n    //\n\n    \"test: map action\": function() {\n      var res = this.res,\n          params;\n\n      params = res._getRequestConfig(\"get\");\n\n      this.assertEquals(\"GET\", params.method);\n      this.assertEquals(\"/photos\", params.url);\n    },\n\n    \"test: map action when base URL\": function() {\n      var res = this.res,\n          params;\n\n      res.setBaseUrl(\"http://example.com\");\n      params = res._getRequestConfig(\"get\");\n\n      this.assertEquals(\"http://example.com/photos\", params.url);\n    },\n\n    \"test: map existing action\": function() {\n      var res = this.res,\n          params;\n\n      res.map(\"post\", \"GET\", \"/articles\");\n      params = res._getRequestConfig(\"post\");\n\n      this.assertEquals(\"/articles\", params.url);\n    },\n\n    \"test: map action creates method\": function() {\n      var res = this.res,\n          req = this.req;\n\n      this.assertFunction(res.get);\n    },\n\n    \"test: map action throws when existing method\": function() {\n      this.require([\"debug\"]);\n\n      var res = this.res,\n          req = this.req;\n\n      // For whatever reason\n      res.popular = function() {};\n\n      this.assertException(function() {\n        res.map(\"popular\", \"GET\", \"/photos/popular\");\n      }, Error);\n    },\n\n    \"test: map action does not throw when existing method is empty\": function() {\n      this.require([\"debug\"]);\n\n      var res = this.res,\n          req = this.req;\n\n      // For documentation purposes\n      res.get = (function() {});\n\n      res.map(\"get\", \"GET\", \"/photos/popular\");\n    },\n\n    \"test: dynamically created action forwards arguments\": function() {\n      var res = this.res,\n          req = this.req;\n\n      this.spy(res, \"invoke\");\n      res.get({}, 1, 2, 3);\n\n      this.assertCalledWith(res.invoke, \"get\", {}, 1, 2, 3);\n    },\n\n    \"test: dynamically created action returns what invoke returns\": function() {\n      var id = 1;\n      this.stub(this.res, \"invoke\").returns(id);\n      this.assertEquals(id, this.res.get());\n    },\n\n    \"test: map actions from description\": function() {\n      var req = this.req,\n          description,\n          res,\n          check = {},\n          params;\n\n      description =\n      {\n        get: { method: \"GET\", url: \"/photos\" },\n        create: { method: \"POST\", url: \"/photos\", check: check }\n      };\n\n      res = new qx.io.rest.Resource(description);\n\n      params = res._getRequestConfig(\"get\");\n      this.assertEquals(\"GET\", params.method);\n      this.assertEquals(\"/photos\", params.url);\n\n      params = res._getRequestConfig(\"create\");\n      this.assertEquals(\"POST\", params.method);\n      this.assertEquals(\"/photos\", params.url);\n      this.assertEquals(check, params.check);\n\n      res.dispose();\n    },\n\n    \"test: map action from description throws with non-object\": function() {\n      this.require([\"debug\"]);\n\n      this.assertException(function() {\n        var res = new qx.io.rest.Resource([]);\n      });\n    },\n\n    \"test: map action from description throws with incomplete route\": function() {\n      this.require([\"debug\"]);\n\n      this.res.dispose();\n      this.assertException(function() {\n        var description =\n        {\n          get: { method: \"GET\"}\n        };\n        this.res = new qx.io.rest.Resource(description);\n      }, Error, \"URL must be string for route 'get'\");\n    },\n\n    //\n    // Invoke\n    //\n\n    \"test: invoke action generically\": function() {\n      var res = this.res,\n          req = this.req,\n          result;\n\n      result = res.invoke(\"get\");\n\n      this.assertSend();\n    },\n\n    \"test: invoke action\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.get();\n\n      this.assertSend();\n    },\n\n    \"test: invoke action returns id of request\": function() {\n      var res = this.res,\n          req = this.req;\n\n      this.assertNumber(res.invoke(\"get\"));\n    },\n\n    \"test: invoke action while other is in progress\": function() {\n      var res = this.res,\n          req1, req2;\n\n      req1 = this.req;\n      res.get();\n\n      this.setUpDoubleRequest();\n\n      req2 = this.req;\n      res.post();\n\n      this.assertCalledOnce(req1.send);\n      this.assertCalledOnce(req2.send);\n    },\n\n    \"test: invoke same action handles multiple requests\": function() {\n      var res = this.res,\n          req1, req2,\n          getSuccess = this.spy();\n\n      res.addListener(\"getSuccess\", getSuccess);\n\n      req1 = this.req;\n      res.get();\n\n      this.setUpDoubleRequest();\n\n      req2 = this.req;\n      res.get();\n\n      this.respond(\"\", req1);\n      this.respond(\"\", req2);\n\n      this.assertCalledTwice(getSuccess);\n    },\n\n    \"test: invoke action with positional params\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}\");\n      res.get({id: \"1\"});\n\n      this.assertCalledWith(req.setUrl, \"/photos/1\");\n    },\n\n    \"test: invoke action with positional params that evaluate to false\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}\");\n      res.get({id: 0});\n\n      this.assertCalledWith(req.setUrl, \"/photos/0\");\n    },\n\n    \"test: invoke action with non-string params\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}\");\n      res.get({id: 1});\n\n      this.assertCalledWith(req.setUrl, \"/photos/1\");\n    },\n\n    \"test: invoke action with params and data\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"put\", \"PUT\", \"/articles/{id}\");\n      res.put({id: \"1\"}, {article: '{title: \"Affe\"}'});\n\n      // Note that with method GET, parameters are appended to the URLs query part.\n      // Please refer to the API docs of qx.io.request.AbstractRequest#requestData.\n      //\n      // res.get({id: \"1\"}, {lang: \"de\"});\n      // --> /articles/1/?lang=de\n\n      this.assertCalledWith(req.setRequestData, {article: '{title: \"Affe\"}'});\n    },\n\n    \"test: invoke action with multiple positional params\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}/comments/{commentId}\");\n      res.get({id: \"1\", commentId: \"2\"});\n\n      this.assertCalledWith(req.setUrl, \"/photos/1/comments/2\");\n    },\n\n    \"test: invoke action with positional params in query\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}/comments?id={commentId}\");\n      res.get({id: \"1\", commentId: \"2\"});\n\n      this.assertCalledWith(req.setUrl, \"/photos/1/comments?id=2\");\n    },\n\n    \"test: invoke action with undefined params\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.get();\n      this.assertCalled(req.send);\n    },\n\n    \"test: invoke action with null params\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.get(null);\n      this.assertCalled(req.send);\n    },\n\n    \"test: invoke action when content type json\": function() {\n      var res = this.res,\n          req = this.req;\n\n      req.setRequestHeader.restore();\n      req.getRequestHeader.restore();\n\n      res.configureRequest(function(req) {\n        req.setRequestHeader(\"Content-Type\", \"application/json\");\n      });\n\n      this.spy(qx.lang.Json, \"stringify\");\n      var data = {location: \"Karlsruhe\"};\n      res.map(\"post\", \"POST\", \"/photos/{id}/meta\");\n      res.post({id: 1}, data);\n\n      this.assertCalledWith(req.setRequestData, '{\"location\":\"Karlsruhe\"}');\n      this.assertCalledWith(qx.lang.Json.stringify, data);\n    },\n\n    \"test: invoke action when content type json and get\": function() {\n      var res = this.res,\n          req = this.req;\n\n      req.setMethod.restore();\n      req.getMethod.restore();\n\n      this.spy(qx.lang.Json, \"stringify\");\n      req.getRequestHeader.withArgs(\"Content-Type\").returns(\"application/json\");\n      res.get();\n\n      this.assertNotCalled(qx.lang.Json.stringify);\n    },\n\n    \"test: invoke action for url with port\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"http://example.com:8080/photos/{id}\");\n      res.get({id: \"1\"});\n\n      this.assertCalledWith(req.setUrl, \"http://example.com:8080/photos/1\");\n    },\n\n    \"test: invoke action for relative url\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"{page}\");\n      res.get({page: \"index\"});\n      this.assertCalledWith(req.setUrl, \"index\");\n    },\n\n    \"test: invoke action for relative url with dots\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"../{page}\");\n      res.get({page: \"index\"});\n      this.assertCalledWith(req.setUrl, \"../index\");\n    },\n\n    \"test: invoke action for route with check\": function() {\n      var res = this.res;\n\n      res.map(\"get\", \"GET\", \"/photos/zoom/{id}\", {id: /\\d+/});\n      res.get({id: \"123\"});\n\n      this.assertSend(\"GET\", \"/photos/zoom/123\");\n    },\n\n    \"test: invoke action fills in empty string when missing param and no default\": function() {\n      var res = this.res;\n\n      res.map(\"get\", \"GET\", \"/photos/{tag}\");\n      res.get();\n\n      this.assertSend(\"GET\", \"/photos/\");\n    },\n\n    \"test: invoke action fills in default when missing param\": function() {\n      var res = this.res;\n\n      res.map(\"get\", \"GET\", \"/photos/{tag=recent}/{size}\");\n      res.get({size: \"large\"});\n\n      this.assertSend(\"GET\", \"/photos/recent/large\");\n    },\n\n    \"test: invoke action throws when missing required positional param\": function() {\n      var res = this.res;\n\n      // Require positional param\n      res.map(\"get\", \"GET\", \"/photos/{tag}\", {tag: qx.io.rest.Resource.REQUIRED});\n      this.assertException(function() {\n        res.get();\n      }, Error, \"Missing parameter 'tag'\");\n    },\n\n    \"test: invoke action throws when missing required request param\": function() {\n      var res = new qx.io.rest.Resource();\n\n      // Require request body param\n      res.map(\"post\", \"POST\", \"/photos/\", {photo: qx.io.rest.Resource.REQUIRED});\n      this.assertException(function() {\n        res.post();\n      }, Error, \"Missing parameter 'photo'\");\n    },\n\n    \"test: invoke action throws when param not match check\": function() {\n      var res = this.res;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}\", {id: /\\d+/});\n      this.assertException(function() {\n        res.get({id: \"FAIL\"});\n      }, Error, \"Parameter 'id' is invalid\");\n    },\n\n    \"test: invoke action ignores invalid check in production\": function() {\n      this.require([\"debug\"]);\n\n      var res = this.res;\n\n      var setting = this.stub(qx.core.Environment, \"get\").withArgs(\"qx.debug\");\n      setting.returns(false);\n\n      // Invalid check\n      res.map(\"get\", \"GET\", \"/photos/{id}\", {id: \"\"});\n      res.get({id: 1});\n    },\n\n    //\n    // Abort\n    //\n\n    \"test: abort action\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.get();\n      res.abort(\"get\");\n\n      this.assertCalledOnce(req.abort);\n    },\n\n    \"test: abort action when multiple requests\": function() {\n      var res = this.res,\n          req1, req2;\n\n      req1 = this.setUpDoubleRequest();\n      res.get();\n\n      req2 = this.setUpDoubleRequest();\n      res.get();\n\n      res.abort(\"get\");\n\n      this.assertCalledOnce(req1.abort);\n      this.assertCalledOnce(req2.abort);\n    },\n\n    \"test: abort by action id\": function() {\n      var res = this.res,\n          req = this.req;\n\n      var id = res.get();\n      res.abort(id);\n\n      this.assertCalledOnce(req.abort);\n    },\n\n    //\n    // Helper\n    //\n\n    \"test: refresh action\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.get();\n      this.assertSend();\n\n      res.refresh(\"get\");\n      this.assertSend();\n    },\n\n    \"test: refresh action replaying previous params\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}\");\n      res.get({id: \"1\"});\n      this.assertSend(\"GET\", \"/photos/1\");\n\n      res.refresh(\"get\");\n      this.assertSend(\"GET\", \"/photos/1\");\n    },\n\n    \"test: poll action\": function() {\n      var res = this.res,\n          sandbox = this.getSandbox();\n\n      sandbox.useFakeTimers();\n      this.spy(res._resource, \"refresh\");\n\n      res.poll(\"get\", 10);\n      this.respond();\n      sandbox.clock.tick(20);\n\n      this.assertCalledWith(res._resource.refresh, \"get\");\n      this.assertCalledOnce(res._resource.refresh);\n    },\n\n    \"test: not poll action when no response received yet\": function() {\n      var res = this.res,\n          sandbox = this.getSandbox();\n\n      sandbox.useFakeTimers();\n      this.spy(res, \"refresh\");\n\n      res.poll(\"get\", 10);\n      sandbox.clock.tick(20);\n\n      this.assertNotCalled(res.refresh);\n    },\n\n    \"test: poll action immediately\": function() {\n      var res = this.res;\n\n      this.spy(res._resource, \"invoke\");\n      res.poll(\"get\", 10, undefined, true);\n      this.assertCalled(res._resource.invoke);\n    },\n\n    \"test: poll action sets initial params\": function() {\n      var res = this.res;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}\");\n      this.stub(res._resource, \"invoke\");\n\n      res.poll(\"get\", 10, {id: \"1\"}, true);\n      this.assertCalledWith(res._resource.invoke, \"get\", {id: \"1\"});\n    },\n\n    \"test: poll action replaying previous params\": function() {\n      var res = this.res,\n          req = this.req;\n\n      res.map(\"get\", \"GET\", \"/photos/{id}\");\n      res.get({id: \"1\"});\n      this.assertSend(\"GET\", \"/photos/1\");\n\n      res.poll(\"get\");\n      this.assertSend(\"GET\", \"/photos/1\");\n    },\n\n    \"test: poll action repeatedly ends previous timer\": function() {\n      var res = this.res,\n          sandbox = this.getSandbox(),\n          msg;\n\n      sandbox.useFakeTimers();\n      this.stub(res._resource, \"refresh\");\n\n      res.poll(\"get\", 10);\n      this.respond();\n      sandbox.clock.tick(20);\n\n      res.poll(\"get\", 100);\n      this.respond();\n      sandbox.clock.tick(100);\n\n      this.assertCalledTwice(res._resource.refresh);\n    },\n\n    \"test: poll many actions\": function() {\n      var res = this.res,\n          sandbox = this.getSandbox(),\n          spy,\n          get,\n          post;\n\n      this.stub(this.req, \"dispose\");\n      sandbox.useFakeTimers();\n\n      spy = this.spy(res._resource, \"refresh\");\n      get = spy.withArgs(\"get\");\n      post = spy.withArgs(\"post\");\n\n      res.poll(\"get\", 10);\n      res.poll(\"post\", 10);\n      this.respond();\n      sandbox.clock.tick(20);\n\n      this.assertCalledOnce(get);\n      this.assertCalledOnce(post);\n\n      this.req.dispose.restore();\n      this.req.dispose();\n    },\n\n    \"test: end poll action\": function() {\n      var res = this.res,\n          sandbox = this.getSandbox(),\n          timer;\n\n      sandbox.useFakeTimers();\n\n      this.spy(res._resource, \"refresh\");\n      timer = res.poll(\"get\", 10);\n      this.respond();\n\n      // 10ms invoke, 20ms refresh, 30ms refresh\n      sandbox.clock.tick(30);\n      timer.stop();\n      sandbox.clock.tick(100);\n\n      this.assertCalledTwice(res._resource.refresh);\n    },\n\n    \"test: end poll action does not end polling of other action\": function() {\n      var res = this.res,\n          sandbox = this.getSandbox(),\n          timer,\n          spy;\n\n      sandbox.useFakeTimers();\n      spy = this.spy(res._resource, \"refresh\").withArgs(\"get\");\n      this.respond();\n\n      res.poll(\"get\", 10);\n      timer = res.poll(\"post\", 10);\n      sandbox.clock.tick(20);\n      timer.stop();\n      sandbox.clock.tick(10);\n\n      this.assertCalledTwice(spy);\n    },\n\n    \"test: restart poll action\": function() {\n      var res = this.res,\n          sandbox = this.getSandbox(),\n          timer;\n\n      sandbox.useFakeTimers();\n      this.respond();\n\n      timer = res.poll(\"get\", 10);\n      sandbox.clock.tick(10);\n      timer.stop();\n\n      this.spy(res._resource, \"refresh\");\n      timer.restart();\n      sandbox.clock.tick(10);\n      this.assertCalled(res._resource.refresh);\n    },\n\n    \"test: long poll action\": function() {\n      var res = this.res,\n          req = this.req,\n          responses = [];\n\n      this.stub(req, \"dispose\");\n\n      res.addListener(\"getSuccess\", function(e) {\n        responses.push(e.getData());\n      }, this);\n      res.longPoll(\"get\");\n\n      // longPoll() sets up new request when receiving a response\n      this.respond(\"1\");\n      this.respond(\"2\");\n      this.respond(\"3\");\n\n      this.assertArrayEquals([\"1\", \"2\", \"3\"], responses);\n    },\n\n    \"test: throttle long poll\": function() {\n      var res = this.res,\n          req = this.req;\n\n      this.stub(req, \"dispose\");\n      this.spy(res, \"refresh\");\n      this.stub(qx.io.rest.Resource, \"POLL_THROTTLE_COUNT\", \"3\");\n\n      res.longPoll(\"get\");\n\n      // A number of immediate responses, above count\n      for (var i=0; i < 4; i++) {\n        this.respond();\n      }\n\n      res.refresh = function() {\n        throw new Error(\"With throttling in effect, \" +\n          \"must not make new request.\");\n      };\n\n      // Throttling\n      this.respond();\n    },\n\n    \"test: not throttle long poll when not received within limit\": function() {\n      var res = this.res,\n          req = this.req,\n          sandbox = this.getSandbox();\n\n      this.stub(req, \"dispose\");\n\n      sandbox.useFakeTimers();\n      res.longPoll(\"get\");\n\n      // A number of delayed responses, above count\n      for (var i=0; i < 31; i++) {\n        sandbox.clock.tick(101);\n        this.respond();\n      }\n\n      this.spy(res, \"refresh\");\n      sandbox.clock.tick(101);\n\n      this.respond();\n      this.assertCalled(res.refresh);\n    },\n\n    \"test: not throttle long poll when not received subsequently\": function() {\n      var res = this.res,\n          req = this.req,\n          sandbox = this.getSandbox();\n\n      this.stub(req, \"dispose\");\n\n      sandbox.useFakeTimers();\n      res.longPoll(\"get\");\n\n      // A number of immediate responses\n      for (var i=0; i < 30; i++) {\n        this.respond();\n      }\n\n      // Delayed response\n      sandbox.clock.tick(101);\n      this.respond();\n\n      // More immediate responses, total count above limit\n      this.spy(res, \"refresh\");\n      for (i=0; i < 10; i++) {\n        this.respond();\n      }\n\n      this.assertCallCount(res.refresh, 10);\n    },\n\n    \"test: end long poll action\": function() {\n      var res = this.res,\n          req = this.req,\n          handlerId,\n          msg;\n\n      this.stub(req, \"dispose\");\n      this.spy(res._resource, \"refresh\");\n\n      handlerId = res.longPoll(\"get\");\n\n      this.respond();\n      this.respond();\n\n      res.removeListenerById(handlerId);\n      this.respond();\n\n      this.assertCalledTwice(res._resource.refresh);\n    },\n\n    //\n    // Events\n    //\n\n    \"test: fire actionSuccess\": function() {\n      var res = this.res,\n          req = this.req,\n          that = this;\n\n      res.get();\n      this.assertEventFired(res, \"getSuccess\", function() {\n        that.respond(\"Affe\");\n      }, function(e) {\n        that.assertEquals(\"Affe\", e.getData());\n        that.assertEquals(\"get\", e.getAction());\n        that.assertIdentical(req, e.getRequest());\n        that.assertInteger(e.getId());\n      });\n    },\n\n    \"test: fire success\": function() {\n      var res = this.res,\n          req = this.req,\n          that = this;\n\n      res.get();\n      this.assertEventFired(res, \"success\", function() {\n        that.respond(\"Affe\");\n      }, function(e) {\n        that.assertEquals(\"Affe\", e.getData());\n        that.assertEquals(\"get\", e.getAction());\n        that.assertIdentical(req, e.getRequest());\n        that.assertInteger(e.getId());\n      });\n    },\n\n    \"test: fire actionError\": function() {\n      var res = this.res,\n          req = this.req,\n          that = this;\n\n      res.get();\n      this.assertEventFired(res, \"getError\", function() {\n        that.respondError(\"statusError\");\n      }, function(e) {\n        that.assertEquals(\"statusError\", e.getPhase());\n        that.assertIdentical(req, e.getRequest());\n      });\n    },\n\n    \"test: fire error\": function() {\n      var res = this.res,\n          req = this.req,\n          that = this;\n\n      res.get();\n      this.assertEventFired(res, \"error\", function() {\n        that.respondError(\"statusError\");\n      }, function(e) {\n        that.assertEquals(\"statusError\", e.getPhase());\n        that.assertIdentical(req, e.getRequest());\n      });\n    },\n\n    //\n    // Dispose\n    //\n\n    \"test: dispose requests\": function() {\n      var res = this.res,\n          req1, req2;\n\n      req1 = this.req;\n      res.get();\n\n      this.setUpDoubleRequest();\n\n      req2 = this.req;\n      res.post();\n\n      this.spy(req1, \"dispose\");\n      this.spy(req2, \"dispose\");\n\n      res.dispose();\n\n      this.assertCalled(req1.dispose);\n      this.assertCalled(req2.dispose);\n    },\n\n    \"test: dispose requests of same action\": function() {\n      var res = this.res,\n          req1, req2;\n\n      req1 = this.req;\n      res.get();\n\n      this.setUpDoubleRequest();\n\n      req2 = this.req;\n      res.get();\n\n      this.spy(req1, \"dispose\");\n      this.spy(req2, \"dispose\");\n\n      res.dispose();\n\n      this.assertCalled(req1.dispose);\n      this.assertCalled(req2.dispose);\n    },\n\n    \"test: dispose request on loadEnd\": function() {\n      var res = this.res,\n          req = this.req;\n\n      this.spy(req, \"dispose\");\n\n      res.get();\n      this.respond();\n\n      setTimeout(function() {\n        this.resume(function() {\n          this.assertCalledOnce(req.dispose);\n        }, this);\n      }.bind(this), 100);\n\n      this.wait();\n    },\n\n    assertSend: function(method, url) {\n      var req = this.req;\n\n      method = method || \"GET\";\n      url = url || \"/photos\";\n\n      this.assertCalledWith(req.setMethod, method);\n      this.assertCalledWith(req.setUrl, url);\n      this.assertCalled(req.send);\n    },\n\n    skip: function(msg) {\n      throw new qx.dev.unit.RequirementError(null, msg);\n    },\n\n    hasDebug: function() {\n      return qx.core.Environment.get(\"qx.debug\");\n    },\n\n    // Fake response\n    respond: function(response, req) {\n      var req = req || this.req;\n      response = response || \"\";\n      req.isDone.returns(true);\n      req.getPhase.returns(\"success\");\n      req.getResponse.returns(response);\n      req.fireEvent(\"success\");\n      req.fireEvent(\"loadEnd\");\n    },\n\n    // Fake erroneous response\n    respondError: function(phase) {\n      var req = this.req;\n      phase = phase || \"statusError\";\n      req.getPhase.returns(phase);\n      req.fireEvent(\"fail\");\n      req.fireEvent(\"loadEnd\");\n    }\n\n  }\n});\n"
  ]
}