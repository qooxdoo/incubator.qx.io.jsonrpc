{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/io/remote/transport/XmlHttp.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "members",
    "setUp",
    "request",
    "io",
    "remote",
    "transport",
    "XmlHttp",
    "addListener",
    "responseError",
    "resourceBase",
    "util",
    "AliasManager",
    "getInstance",
    "resolve",
    "tearDown",
    "dispose",
    "e",
    "getTarget",
    "type",
    "getType",
    "event",
    "Timer",
    "once",
    "resume",
    "fail",
    "getStatusCode",
    "getStatusText",
    "getUrl",
    "path",
    "ResourceManager",
    "toUri",
    "isLocal",
    "window",
    "location",
    "protocol",
    "needsPHPWarning",
    "warn",
    "testSetHeader",
    "setUrl",
    "getRequestHeaders",
    "setRequestHeader",
    "response",
    "lang",
    "Json",
    "parse",
    "getResponseText",
    "toLowerCase",
    "assertEquals",
    "that",
    "setTimeout",
    "send",
    "wait",
    "testGetResponseHeader",
    "juhu",
    "getResponseHeader",
    "test"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\nqooxdoo - the new era of web development\n\nhttp://qooxdoo.org\n\nCopyright:\n  2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\nLicense:\n     MIT: https://opensource.org/licenses/MIT\n  See the LICENSE file in the project's top-level directory for details.\n\nAuthors:\n  * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/*\n*/\n/**\n *\n * @asset(qx/test/*)\n */\n\nqx.Class.define(\"qx.test.io.remote.transport.XmlHttp\",\n{\n  extend : qx.dev.unit.TestCase,\n\n  members :\n  {\n    setUp : function()\n    {\n      this.request = new qx.io.remote.transport.XmlHttp();\n\n      this.request.addListener(\"aborted\", this.responseError, this);\n      this.request.addListener(\"failed\", this.responseError, this);\n      this.request.addListener(\"timeout\", this.responseError, this);\n\n      this.resourceBase = qx.util.AliasManager.getInstance().resolve(\"qx/test/\");\n    },\n\n\n    tearDown : function() {\n      this.request.dispose();\n    },\n\n\n    responseError : function(e)\n    {\n      var request = e.getTarget();\n      var type = e.getType();\n\n      qx.event.Timer.once(function() {\n        this.resume(function() {\n          this.fail(\n            \"Response error: \" + type + \" \" +\n            request.getStatusCode() + \" \" +\n            request.getStatusText()\n          );\n        }, this);\n      }, this);\n    },\n\n\n    getUrl : function(path) {\n      return qx.util.ResourceManager.getInstance().toUri(path);\n    },\n\n\n    isLocal : function() {\n      return window.location.protocol == \"file:\";\n    },\n\n\n    needsPHPWarning : function() {\n      this.warn(\"This test can only be run from a web server with PHP support.\");\n    },\n\n\n    testSetHeader : function()\n    {\n      if (this.isLocal()) {\n        this.needsPHPWarning();\n        return;\n      }\n\n      this.request.setUrl(this.getUrl(\"qx/test/xmlhttp/echo_header.php\"));\n\n      this.request.getRequestHeaders()[\"foo\"] = \"bar\";\n      this.request.setRequestHeader(\"juhu\", \"kinners\");\n\n      this.request.addListener(\"completed\", function(e) { this.resume(function() {\n        var response = qx.lang.Json.parse(this.request.getResponseText().toLowerCase());\n        this.assertEquals(\"kinners\", response[\"juhu\"]);\n        this.assertEquals(\"bar\", response[\"foo\"]);\n      }, this); }, this);\n\n      var that = this;\n      window.setTimeout(function() {\n        that.request.send();\n      }, 250);\n      this.wait(7500);\n    },\n\n\n    testGetResponseHeader : function()\n    {\n      if (this.isLocal()) {\n        this.needsPHPWarning();\n        return;\n      }\n\n      this.request.setUrl(this.getUrl(\"qx/test/xmlhttp/send_known_header.php\"));\n\n      this.request.addListener(\"completed\", function(e) { this.resume(function() {\n        var juhu = this.request.getResponseHeader(\"juhu\") || this.request.getResponseHeader(\"Juhu\");\n        this.assertEquals(\"kinners\", juhu);\n      }, this); }, this);\n\n      var that = this;\n      window.setTimeout(function() {\n        that.request.send();\n      }, 250);\n      this.wait(7500);\n    }\n  }\n});\n"
  ]
}