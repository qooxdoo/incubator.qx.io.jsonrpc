{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/source/class/qx/test/io/graphql/Client.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "test",
    "io",
    "MAssert",
    "statics",
    "TEST_ENDPOINT",
    "construct",
    "client",
    "graphql",
    "Client",
    "constructor",
    "members",
    "runQuery",
    "query",
    "expected",
    "req",
    "protocol",
    "Request",
    "result",
    "send",
    "assertDeepEquals",
    "e",
    "assertInstance",
    "exception",
    "Protocol",
    "assertEquals",
    "message",
    "Error",
    "Math",
    "random",
    "response",
    "Transport"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;;;;;;;;;;;;;;;;;AAkBAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,2BAAhB,EACE;AACEC,IAAAA,MAAM,EAAGN,EAAE,CAACO,GAAH,CAAOC,IAAP,CAAYC,QADvB;AAEEC,IAAAA,OAAO,EAAG,CAACV,EAAE,CAACW,IAAH,CAAQC,EAAR,CAAWC,OAAZ,CAFZ;AAGEC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAE;AADR,KAHX;;AAMEC,IAAAA,SAAS,GAAG;AACV;AACA,WAAKC,MAAL,GAAc,IAAIjB,EAAE,CAACY,EAAH,CAAMM,OAAN,CAAcC,MAAlB,CAAyB,KAAKC,WAAL,CAAiBL,aAA1C,CAAd;AACD,KATH;;AAUEM,IAAAA,OAAO,EAAG;AAER,YAAMC,QAAN,CAAeC,KAAf,EAAsBC,QAAtB,EAAgC;AAC9B,YAAIC,GAAG,GAAG,IAAIzB,EAAE,CAACY,EAAH,CAAMM,OAAN,CAAcQ,QAAd,CAAuBC,OAA3B,CAAmC;AAACJ,UAAAA;AAAD,SAAnC,CAAV;AACA,YAAIK,MAAM,GAAG,MAAM,KAAKX,MAAL,CAAYY,IAAZ,CAAiBJ,GAAjB,CAAnB;AACA,aAAKK,gBAAL,CAAsBN,QAAtB,EAAgCI,MAAhC;AACD,OANO;;AAQR,YAAM,4BAAN,GAAqC;AACnC,cAAM,KAAKN,QAAL,CAAe;;;;;UAAf,EAKF;AACF,qBAAW,CACT;AACE,oBAAQ,aADV;AAEE,0BAAc,SAFhB;AAGE,oBAAQ;AACN,yBAAW;AADL,aAHV;AAME,iCAAqB,CACnB;AACE,sBAAQ;AADV,aADmB,EAInB;AACE,sBAAQ;AADV,aAJmB,EAOnB;AACE,sBAAQ;AADV,aAPmB;AANvB,WADS;AADT,SALE,CAAN;AA2BD,OApCO;;AAsCR,YAAM,6BAAN,GAAsC;AACpC,YAAI;AACF,gBAAM,KAAKA,QAAL,CAAe,kBAAf,CAAN;AACD,SAFD,CAEE,OAAOS,CAAP,EAAU;AACV,eAAKC,cAAL,CAAoBD,CAApB,EAAuB/B,EAAE,CAACY,EAAH,CAAMqB,SAAN,CAAgBC,QAAvC;AACA,eAAKC,YAAL,CAAkB,mDAAlB,EAAuEJ,CAAC,CAACK,OAAzE;AACA;AACD;;AACD,cAAM,IAAIC,KAAJ,CAAU,6CAAV,CAAN;AACD,OA/CO;;AAiDR,YAAM,8BAAN,GAAuC;AACrC,YAAI;AACF,cAAIpB,MAAM,GAAG,IAAIjB,EAAE,CAACY,EAAH,CAAMM,OAAN,CAAcC,MAAlB,CAAyB,8BAA4BmB,IAAI,CAACC,MAAL,EAArD,CAAb;AACA,cAAIC,QAAQ,GAAG,MAAMvB,MAAM,CAACY,IAAP,CAAY,0BAAZ,CAArB;AACD,SAHD,CAGE,OAAOE,CAAP,EAAU;AACV,eAAKC,cAAL,CAAoBD,CAApB,EAAuB/B,EAAE,CAACY,EAAH,CAAMqB,SAAN,CAAgBQ,SAAvC;AACA;AACD;;AACD,cAAM,IAAIJ,KAAJ,CAAU,8CAAV,CAAN;AACD;;AA1DO;AAVZ,GADF;AAlBArC,EAAAA,EAAE,CAACW,IAAH,CAAQC,EAAR,CAAWM,OAAX,CAAmBC,MAAnB,CAA0BhB,aAA1B,GAA0CA,aAA1C",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2020 Christian Boulanger\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Christian Boulanger (cboulanger)\n\n************************************************************************ */\n\nqx.Class.define(\"qx.test.io.graphql.Client\",\n  {\n    extend : qx.dev.unit.TestCase,\n    include : [qx.test.io.MAssert],\n    statics: {\n      TEST_ENDPOINT: \"https://countries-274616.ew.r.appspot.com/\"\n    },\n    construct() {\n      this.base(arguments);\n      this.client = new qx.io.graphql.Client(this.constructor.TEST_ENDPOINT);\n    },\n    members : {\n\n      async runQuery(query, expected) {\n        let req = new qx.io.graphql.protocol.Request({query});\n        let result = await this.client.send(req);\n        this.assertDeepEquals(expected, result)\n      },\n\n      async \"test: run successful query\"() {\n        await this.runQuery(`query {\n          Country(name: \"Switzerland\") {\n            name, nativeName, flag {svgFile},\n            officialLanguages {name}\n          }\n        }`, {\n          \"Country\": [\n            {\n              \"name\": \"Switzerland\",\n              \"nativeName\": \"Schweiz\",\n              \"flag\": {\n                \"svgFile\": \"https://restcountries.eu/data/che.svg\"\n              },\n              \"officialLanguages\": [\n                {\n                  \"name\": \"Italian\"\n                },\n                {\n                  \"name\": \"French\"\n                },\n                {\n                  \"name\": \"German\"\n                }\n              ]\n            }\n          ]\n        });\n      },\n\n      async \"test: expect protocol error\"() {\n        try {\n          await this.runQuery(`query { invalid}`);\n        } catch (e) {\n          this.assertInstance(e, qx.io.exception.Protocol);\n          this.assertEquals(\"Cannot query field \\\"invalid\\\" on type \\\"Query\\\".\", e.message);\n          return;\n        }\n        throw new Error(\"Query should throw qx.io.exception.Protocol\");\n      },\n\n      async \"test: expect transport error\"() {\n        try {\n          let client = new qx.io.graphql.Client(\"https://doesnotexist.org/\"+Math.random());\n          let response = await client.send(\"query: { doesnotmatter }\");\n        } catch (e) {\n          this.assertInstance(e, qx.io.exception.Transport);\n          return;\n        }\n        throw new Error(\"Query should throw qx.io.exception.Transport\");\n      }\n    }\n  });\n"
  ]
}