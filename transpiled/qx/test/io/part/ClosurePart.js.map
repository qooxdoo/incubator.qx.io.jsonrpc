{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/io/part/ClosurePart.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "test",
    "io",
    "MRemoteTest",
    "members",
    "__dummyLoader",
    "__timeout",
    "__loader",
    "setUp",
    "PART_FILES",
    "Part",
    "LOAD_ORDER",
    "part",
    "MockLoader",
    "$$instance",
    "TIMEOUT",
    "tearDown",
    "undefined",
    "loadPackage",
    "pkg",
    "loadClosure",
    "notifyPackageResult",
    "Package",
    "getUrl",
    "ClosurePart",
    "addToPackage",
    "self",
    "load",
    "readyState",
    "resume",
    "assertEquals",
    "assertJsonEquals",
    "wait",
    "pkg1",
    "pkg2",
    "MockPackage",
    "pkg3",
    "isLocal",
    "needsPHPWarning",
    "fail",
    "setTimeout",
    "preload"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\nqooxdoo - the new era of web development\n\nhttp://qooxdoo.org\n\nCopyright:\n  2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\nLicense:\n     MIT: https://opensource.org/licenses/MIT\n  See the LICENSE file in the project's top-level directory for details.\n\nAuthors:\n  * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n/**\n * @ignore(qx.test.PART_FILES)\n *\n * @asset(qx/test/*)\n */\n\nqx.Class.define(\"qx.test.io.part.ClosurePart\",\n{\n  extend : qx.dev.unit.TestCase,\n  include : qx.test.io.MRemoteTest,\n\n  members :\n  {\n    __dummyLoader : null,\n    __timeout : null,\n    __loader : null,\n\n    setUp : function()\n    {\n      qx.test.PART_FILES = [];\n      qx.test.Part.LOAD_ORDER = [];\n      this.__dummyLoader = new qx.test.io.part.MockLoader();\n\n      this.__loader = new qx.Part(this.__dummyLoader);\n      qx.Part.$$instance = this.__loader;\n      this.__timeout = qx.Part.TIMEOUT;\n      qx.Part.TIMEOUT = 3000;\n    },\n\n\n    tearDown : function() {\n      qx.Part.$$instance = undefined;\n      qx.Part.TIMEOUT = this.__timeout;\n    },\n\n\n    loadPackage : function(part, pkg)\n    {\n      pkg.loadClosure(this.__loader.notifyPackageResult, this.__loader);\n    },\n\n\n    \"test: load part with one package\" : function()\n    {\n      var pkg = new qx.io.part.Package(\n        [this.getUrl(\"qx/test/part/file1-closure.js\")], \"p1\"\n      );\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg], this.__loader);\n\n      this.__loader.addToPackage(pkg);\n\n      var self = this;\n      part.load(function(readyState) { self.resume(function()\n      {\n        self.assertEquals(\"complete\", readyState);\n        self.assertJsonEquals(\n          [\"file1-closure\"],\n          qx.test.PART_FILES\n        );\n      });});\n\n      this.wait();\n    },\n\n\n    \"test: load part with two packages\" : function()\n    {\n      var pkg1 = new qx.io.part.Package(\n        [this.getUrl(\"qx/test/part/file1-closure.js\")], \"p1\"\n      );\n      var pkg2 = new qx.io.part.Package(\n        [this.getUrl(\"qx/test/part/file2-closure.js\")], \"p2\"\n      );\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg1, pkg2], this.__loader);\n\n      this.__loader.addToPackage(pkg1);\n      this.__loader.addToPackage(pkg2);\n\n      var self = this;\n      part.load(function(readyState) { self.resume(function()\n      {\n        self.assertJsonEquals(\n          [\"file1-closure\", \"file2-closure\"],\n          qx.test.PART_FILES\n        );\n      });});\n\n      this.wait();\n    },\n\n\n    \"test: load part with two packages and one already loading\" : function()\n    {\n      var pkg1 = new qx.test.io.part.MockPackage(\"p1\", null, null, null, true);\n      var pkg2 = new qx.test.io.part.MockPackage(\"p2\", null, null, null, true);\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg1, pkg2], this.__loader);\n\n      this.__loader.addToPackage(pkg1);\n      this.__loader.addToPackage(pkg2);\n\n      this.loadPackage(part, pkg2);\n\n      var self = this;\n      part.load(function(readyState) { self.resume(function()\n      {\n        self.assertJsonEquals(\n          [\"p1\", \"p2\"],\n          qx.test.Part.LOAD_ORDER\n        );\n      });});\n\n      this.wait();\n    },\n\n\n    \"test: load part with two packages and both already loading\" : function()\n    {\n      var pkg1 = new qx.test.io.part.MockPackage(\"p1\", null, null, null, true);\n      var pkg2 = new qx.test.io.part.MockPackage(\"p2\", null, null, null, true);\n\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg1, pkg2], this.__loader);\n\n      this.__loader.addToPackage(pkg1);\n      this.__loader.addToPackage(pkg2);\n\n      this.loadPackage(part, pkg1);\n      this.loadPackage(part, pkg2);\n\n      var self = this;\n      part.load(function(readyState) { self.resume(function()\n      {\n        self.assertJsonEquals(\n          [\"p1\", \"p2\"],\n          qx.test.Part.LOAD_ORDER\n        );\n      });});\n\n      this.wait();\n    },\n\n\n    \"test: load part with three packages and delay\" : function()\n    {\n      var pkg1 = new qx.test.io.part.MockPackage(\"p1\", 200, null, null, true);\n      var pkg2 = new qx.test.io.part.MockPackage(\"p2\", null, null, null, true);\n      var pkg3 = new qx.test.io.part.MockPackage(\"p3\", 100, null, null, true);\n\n      this.__loader.addToPackage(pkg1);\n      this.__loader.addToPackage(pkg2);\n      this.__loader.addToPackage(pkg3);\n\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg1, pkg2, pkg3], this.__loader);\n\n      var self = this;\n      part.load(function(readyState) { self.resume(function()\n      {\n        self.assertJsonEquals(\n          [\"p1\", \"p2\", \"p3\"],\n          qx.test.Part.LOAD_ORDER\n        );\n      });});\n\n      this.wait();\n    },\n\n\n\n    \"test: load part with two packages and delay first part\" : function()\n    {\n      if (this.isLocal()) {\n        this.needsPHPWarning();\n        return;\n      }\n      var pkg1 = new qx.test.io.part.MockPackage(\"p1\", 100, null, null, true);\n      var pkg2 = new qx.test.io.part.MockPackage(\"p2\", null, null, null, true);\n\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg1, pkg2], this.__loader);\n\n      this.__loader.addToPackage(pkg1);\n      this.__loader.addToPackage(pkg2);\n\n      var self = this;\n      part.load(function(readyState) { self.resume(function()\n      {\n        self.assertJsonEquals(\n          [\"p1\", \"p2\"],\n          qx.test.Part.LOAD_ORDER\n        );\n      });});\n\n      this.wait();\n    },\n\n\n    \"test: load part with an error package\" : function()\n    {\n      var pkg1 = new qx.test.io.part.MockPackage(\"file211-closure\", null, true, null, true);\n\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg1], this.__loader);\n\n      this.__loader.addToPackage(pkg1);\n\n      var self = this;\n      part.load(function(readyState) { self.resume(function()\n      {\n        self.assertEquals(\"error\", readyState);\n        self.assertJsonEquals([], qx.test.Part.LOAD_ORDER);\n      });});\n\n      this.wait();\n    },\n\n\n    \"test: load part with a loaded package should not reload the package again\" : function()\n    {\n      var pkg1 = new qx.test.io.part.MockPackage(\"p1\", null, null, \"complete\", true);\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg1], this.__loader);\n\n      var self = this;\n\n      pkg1.load = function() {\n        self.resume(function() {\n          self.fail();\n        });\n      };\n\n      part.load(function(readyState) { self.resume(function() {\n        self.assertEquals(\"complete\", readyState);\n      });});\n      this.wait();\n    },\n\n\n    \"test: load a part with preloaded package\" : function()\n    {\n      var pkg = new qx.test.io.part.MockPackage(\"p1\", null, null, null, true);\n      var part = new qx.io.part.ClosurePart(\"juhu\", [pkg], this.__loader);\n\n      this.__loader.addToPackage(pkg);\n\n      var self = this;\n\n      setTimeout(function()\n      {\n        part.load(function(readyState) { self.resume(function()\n        {\n          self.assertEquals(\"complete\", readyState);\n          self.assertJsonEquals(\n            [\"p1\"],\n            qx.test.Part.LOAD_ORDER\n          );\n        });});\n      }, 100);\n\n      part.preload();\n\n      pkg.loadClosure = function() {\n        self.resume(function() {\n          self.fail(\"load called twice!\");\n        });\n      };\n\n      this.wait();\n    }\n  }\n});\n"
  ]
}