{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/io/part/Package.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "test",
    "io",
    "MRemoteTest",
    "members",
    "__dummyLoader",
    "setUp",
    "PART_FILES",
    "part",
    "MockLoader",
    "createPackage",
    "urls",
    "hash",
    "loaded",
    "Package",
    "getUrl",
    "pkg",
    "assertEquals",
    "getReadyState",
    "load",
    "resume",
    "wait",
    "assertJsonEquals",
    "isLocal",
    "needsPHPWarning",
    "core",
    "Environment",
    "get",
    "loader",
    "Part",
    "$$instance",
    "addToPackage",
    "loadClosure",
    "execute",
    "oldTimeout",
    "TIMEOUT"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\nqooxdoo - the new era of web development\n\nhttp://qooxdoo.org\n\nCopyright:\n  2007-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\nLicense:\n     MIT: https://opensource.org/licenses/MIT\n  See the LICENSE file in the project's top-level directory for details.\n\nAuthors:\n  * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n/**\n * @ignore(qx.test.PART_FILES)\n *\n * @asset(qx/test/*)\n */\n\nqx.Class.define(\"qx.test.io.part.Package\",\n{\n  extend : qx.dev.unit.TestCase,\n  include : qx.test.io.MRemoteTest,\n\n  members :\n  {\n    __dummyLoader : null,\n\n\n    setUp : function() {\n      qx.test.PART_FILES = [];\n      this.__dummyLoader = new qx.test.io.part.MockLoader();\n    },\n\n\n    createPackage : function(urls, hash, loaded) {\n      return new qx.io.part.Package(urls, hash, loaded);\n    },\n\n\n    \"test: load a package with one JS file\" : function()\n    {\n      var urls = [\n        this.getUrl(\"qx/test/part/file1.js\")\n      ];\n      var pkg = this.createPackage(urls, \"1\", false);\n      this.assertEquals(\"initialized\", pkg.getReadyState());\n\n      pkg.load(function() { this.resume(function() {\n        this.assertEquals(\"complete\", pkg.getReadyState());\n        this.assertEquals(\"file1\", qx.test.PART_FILES[0]);\n      }, this);}, this);\n\n      this.assertEquals(\"loading\", pkg.getReadyState());\n\n      this.wait();\n    },\n\n\n    \"test: load several files\" : function()\n    {\n      var urls = [\n        this.getUrl(\"qx/test/part/file1.js\"),\n        this.getUrl(\"qx/test/part/file2.js\"),\n        this.getUrl(\"qx/test/part/file3.js\")\n      ];\n\n      var pkg = this.createPackage(urls, \"1\", false);\n      pkg.load(function() { this.resume(function() {\n        this.assertJsonEquals(\n          [\"file1\", \"file2\", \"file3\"],\n          qx.test.PART_FILES\n        );\n      }, this);}, this);\n\n      this.wait();\n    },\n\n\n    \"test: delay the first file - test load order\" : function()\n    {\n      if (this.isLocal()) {\n        this.needsPHPWarning();\n        return;\n      }\n\n      var urls = [\n        this.getUrl(\"qx/test/part/delay.php\") + \"?sleep=0.3\",\n        this.getUrl(\"qx/test/part/file2.js\"),\n        this.getUrl(\"qx/test/part/file3.js\")\n      ];\n\n      var pkg = this.createPackage(urls, \"1\", false);\n      pkg.load(function() { this.resume(function()\n      {\n        this.assertJsonEquals(\n          [\"file1\", \"file2\", \"file3\"],\n          qx.test.PART_FILES\n        );\n      }, this);}, this);\n\n      this.wait();\n    },\n\n\n    \"test: if one of the files fails to load, no load event should be fired\" : function()\n    {\n      if (this.isLocal()) {\n        this.needsPHPWarning();\n        return;\n      }\n\n      // test don't work in IE, Safari 3 and Opera\n      if ( qx.core.Environment.get(\"engine.name\") == \"opera\" ||\n           qx.core.Environment.get(\"engine.name\") == \"mshtml\")\n       {\n        return;\n      }\n\n      var urls = [\n        this.getUrl(\"qx/test/part/file1.js\"),\n        this.getUrl(\"qx/test/xmlhttp/404.php\"),\n        this.getUrl(\"qx/test/part/file3.js\")\n      ];\n\n      var pkg = this.createPackage(urls, \"1\", false);\n      pkg.load(function() { this.resume(function() {\n        this.assertEquals(\"error\", pkg.getReadyState());\n      }, this);}, this);\n\n      this.wait();\n    },\n\n\n    \"test: loading a closure package with load() should execute the closure\" : function()\n    {\n      var urls = [\n        this.getUrl(\"qx/test/part/file1-closure.js\")\n      ];\n\n      var pkg = this.createPackage(urls, \"p1\", false);\n\n      var loader = new qx.Part(this.__dummyLoader);\n      qx.Part.$$instance = loader;\n\n      loader.addToPackage(pkg);\n\n\n      pkg.load(function() { this.resume(function()\n      {\n        this.assertJsonEquals(\n          [\"file1-closure\"],\n          qx.test.PART_FILES\n        );\n      }, this);}, this);\n\n      this.wait();\n    },\n\n\n    \"test: loading a closure package with loadClosure() should not execute the closure\" : function()\n    {\n      var urls = [\n        this.getUrl(\"qx/test/part/file1-closure.js\")\n      ];\n\n      var pkg = this.createPackage(urls, \"p1\", false);\n\n      var loader = new qx.Part(this.__dummyLoader);\n      qx.Part.$$instance = loader;\n\n      loader.addToPackage(pkg);\n\n\n      pkg.loadClosure(function() { this.resume(function()\n      {\n        this.assertEquals(\"cached\", pkg.getReadyState());\n        this.assertJsonEquals([], qx.test.PART_FILES);\n\n        pkg.execute();\n        this.assertJsonEquals(\n          [\"file1-closure\"],\n          qx.test.PART_FILES\n        );\n      }, this);}, this);\n\n      this.wait();\n    },\n\n\n    \"test: loading a non existing file with loadClosure() should timeout\" : function()\n    {\n      var pkg = this.createPackage([\"___foo.js\"], \"p1\", false);\n\n      var loader = new qx.Part(this.__dummyLoader);\n      qx.Part.$$instance = loader;\n\n      loader.addToPackage(pkg);\n\n      var oldTimeout = qx.Part.TIMEOUT;\n      qx.Part.TIMEOUT = 300;\n\n      pkg.loadClosure(function() {\n        this.resume(function()\n        {\n          this.assertEquals(\"error\", pkg.getReadyState());\n          this.assertJsonEquals([], qx.test.PART_FILES);\n        }, this);\n      }, this);\n\n      qx.Part.TIMEOUT = oldTimeout;\n\n      this.wait();\n    }\n  }\n});\n"
  ]
}