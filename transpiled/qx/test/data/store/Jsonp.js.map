{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/data/store/Jsonp.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MRequirements",
    "MMock",
    "members",
    "__store",
    "setUp",
    "require",
    "data",
    "store",
    "Jsonp",
    "url",
    "util",
    "ResourceManager",
    "getInstance",
    "toUri",
    "tearDown",
    "getSandbox",
    "restore",
    "dispose",
    "request",
    "model",
    "name",
    "$$registry",
    "search",
    "isLocal",
    "window",
    "location",
    "protocol",
    "setUpFakeRequest",
    "req",
    "io",
    "send",
    "stub",
    "returns",
    "testSetCallbackParam",
    "setCallbackParam",
    "setUrl",
    "assertCalledWith",
    "testSetCallbackName",
    "setCallbackName",
    "testWholePrimitive",
    "addListener",
    "resume",
    "getModel",
    "assertEquals",
    "getString",
    "getNumber",
    "getBoolean",
    "assertNull",
    "getNull",
    "wait",
    "testManipulatePrimitive",
    "manipulated",
    "delegate",
    "manipulateData",
    "assertTrue",
    "testConfigureRequestPrimitive",
    "self",
    "configureRequest",
    "assertInstance",
    "spy",
    "assertCalled",
    "testDisposeRequest",
    "testDisposeRequestDone",
    "testErrorEvent",
    "core",
    "Environment",
    "get",
    "test"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n/**\n * @ignore(qx.data.model)\n *\n * @asset(qx/test/*)\n */\n\nqx.Class.define(\"qx.test.data.store.Jsonp\",\n{\n  extend : qx.dev.unit.TestCase,\n\n  include : [qx.dev.unit.MRequirements,\n             qx.dev.unit.MMock],\n\n  members :\n  {\n    __store : null,\n\n    setUp : function()\n    {\n      this.require([\"php\"]);\n      this.__store = new qx.data.store.Jsonp();\n\n      this.url = qx.util.ResourceManager.getInstance().\n        toUri(\"qx/test/jsonp_primitive.php\");\n    },\n\n\n    tearDown : function()\n    {\n      this.getSandbox().restore();\n      this.__store.dispose();\n\n      if (this.request) {\n\n        // From prototype\n        delete this.request.dispose;\n\n        // Dispose\n        this.request.dispose();\n      }\n\n      // remove the former created classes\n      qx.data.model = {};\n      for (var name in qx.Class.$$registry) {\n        if (name.search(\"qx.data.model\") != -1) {\n          delete qx.Class.$$registry[name];\n        }\n      }\n    },\n\n\n    isLocal : function() {\n      return window.location.protocol == \"file:\";\n    },\n\n\n    setUpFakeRequest : function()\n    {\n      var req = this.request = new qx.io.request.Jsonp();\n      req.send = req.dispose = function() {};\n      this.stub(qx.io.request, \"Jsonp\").returns(this.stub(req));\n    },\n\n\n    testSetCallbackParam: function() {\n      this.setUpFakeRequest();\n\n      var store = new qx.data.store.Jsonp();\n      store.setCallbackParam(\"myCallback\");\n      store.setUrl(\"/url\");\n\n      this.assertCalledWith(this.request.setCallbackParam, \"myCallback\");\n      store.dispose();\n    },\n\n\n    testSetCallbackName: function() {\n      this.setUpFakeRequest();\n\n      var store = new qx.data.store.Jsonp();\n      store.setCallbackName(\"myCallback\");\n      store.setUrl(\"/url\");\n\n      this.assertCalledWith(this.request.setCallbackName, \"myCallback\");\n      store.dispose();\n    },\n\n\n    testWholePrimitive: function() {\n      this.__store.addListener(\"loaded\", function() {\n        this.resume(function() {\n          var model = this.__store.getModel();\n          this.assertEquals(\"String\", model.getString(), \"The model is not created how it should!\");\n          this.assertEquals(12, model.getNumber(), \"The model is not created how it should!\");\n          this.assertEquals(true, model.getBoolean(), \"The model is not created how it should!\");\n          this.assertNull(model.getNull(), \"The model is not created how it should!\");\n        }, this);\n      }, this);\n\n      var url = this.url;\n      this.__store.setUrl(url);\n\n      this.wait();\n    },\n\n\n    testManipulatePrimitive: function() {\n      var manipulated = false;\n      var delegate = {manipulateData : function(data) {\n        manipulated = true;\n        return data;\n      }};\n\n      var store = new qx.data.store.Jsonp(null, delegate, \"callback\");\n\n      store.addListener(\"loaded\", function() {\n        this.resume(function() {\n          this.assertTrue(manipulated);\n        }, this);\n      }, this);\n\n      var url = this.url;\n      store.setUrl(url);\n\n      this.wait();\n      store.dispose();\n    },\n\n\n    testConfigureRequestPrimitive: function() {\n      var delegate,\n          self = this;\n\n      delegate = {configureRequest : function(request) {\n        self.assertInstance(request, qx.io.request.Jsonp);\n      }};\n\n      this.spy(delegate, \"configureRequest\");\n\n      var store = new qx.data.store.Jsonp(null, delegate, \"callback\");\n\n      store.addListener(\"loaded\", function() {\n        this.resume(function() {\n          this.assertCalled(delegate.configureRequest);\n        }, this);\n      }, this);\n\n      var url = this.url;\n      store.setUrl(url);\n\n      this.wait();\n    },\n\n\n    testDisposeRequest: function() {\n      this.setUpFakeRequest();\n\n      var store = new qx.data.store.Jsonp(this.url);\n      store.dispose();\n\n      this.assertCalled(this.request.dispose);\n    },\n\n\n    testDisposeRequestDone: function() {\n      this.setUpFakeRequest();\n      var url = this.url;\n      this.__store.addListener(\"loaded\", function() {\n        this.resume(function() {\n          this.__store.dispose();\n          this.assertCalled(this.request.dispose);\n        }, this);\n      }, this);\n      this.__store.setUrl(url);\n    },\n\n\n    testErrorEvent : function() {\n      // do not test that for IE and Opera because of the missing\n      // error handler for script tags\n      if (\n        !(qx.core.Environment.get(\"browser.name\") == \"ie\") &&\n        !(qx.core.Environment.get(\"browser.name\") == \"opera\"))\n        {\n        this.__store.addListener(\"error\", function() {\n          this.resume(function() {}, this);\n        }, this);\n\n        this.__store.setUrl(\"affe\");\n\n        this.wait();\n      }\n    }\n  }\n});\n"
  ]
}