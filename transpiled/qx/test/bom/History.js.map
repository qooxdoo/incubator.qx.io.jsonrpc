{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/bom/History.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MRequirements",
    "members",
    "__history",
    "hasNoIe",
    "core",
    "Environment",
    "get",
    "setUp",
    "bom",
    "History",
    "getInstance",
    "testInstance",
    "runsInIframe",
    "window",
    "top",
    "$$instance",
    "assertInstance",
    "HashHistory",
    "IframeHistory",
    "NativeHistory",
    "testAddState",
    "addToHistory",
    "self",
    "setTimeout",
    "resume",
    "__checkState",
    "wait",
    "testNavigateBack",
    "__checkFooAndSetBar",
    "assertEquals",
    "_readState",
    "__checkBarAndGoBack",
    "history",
    "back",
    "getTitle",
    "testNavigateBackAfterSetState",
    "setState",
    "__setState_checkAffeAndSetFoo",
    "__setState_checkFooAndSetBar",
    "__setState_checkBarAndGoBack",
    "testRequestEvent",
    "addListenerOnce",
    "assertTrue",
    "testRequestEventAddHistory",
    "ev",
    "getData",
    "test"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007-2012 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Daniel Wagner (danielwagner)\n     * Mustafa Sak (msak)\n\n************************************************************************ */\n\nqx.Class.define(\"qx.test.bom.History\", {\n\n  extend : qx.dev.unit.TestCase,\n\n  include : [qx.dev.unit.MRequirements],\n\n  members :\n  {\n    __history : null,\n\n\n    hasNoIe : function()\n    {\n      return qx.core.Environment.get(\"engine.name\") !== \"mshtml\";\n    },\n\n\n    setUp : function()\n    {\n      this.__history = qx.bom.History.getInstance();\n    },\n\n\n    testInstance : function()\n    {\n      var runsInIframe = !(window == window.top);\n\n      if (!this.$$instance)\n      {\n        // in iframe + IE9\n        if (runsInIframe\n          && qx.core.Environment.get(\"browser.documentmode\") == 9\n        ) {\n          this.assertInstance(this.__history, qx.bom.HashHistory);\n        }\n\n        // in iframe + IE<9\n        else if (runsInIframe\n          && qx.core.Environment.get(\"engine.name\") == \"mshtml\"\n          && qx.core.Environment.get(\"browser.documentmode\") < 9\n        ) {\n          this.assertInstance(this.__history, qx.bom.IframeHistory);\n        }\n\n        // browser with hashChange event\n        else if (qx.core.Environment.get(\"event.hashchange\")) {\n          this.assertInstance(this.__history, qx.bom.NativeHistory);\n        }\n\n        // IE without hashChange event\n        else if ((qx.core.Environment.get(\"engine.name\") == \"mshtml\")) {\n          this.assertInstance(this.__history, qx.bom.IframeHistory);\n        }\n      }\n    },\n\n\n    testAddState : function()\n    {\n      this.__history.addToHistory(\"foo\", \"Title Foo\");\n\n      var self = this;\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.__checkState();\n        }, self);\n      }, 200);\n\n      this.wait();\n    },\n\n\n    testNavigateBack : function()\n    {\n      this.__history.addToHistory(\"foo\", \"Title Foo\");\n      var self = this;\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.__checkFooAndSetBar();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n\n    __checkFooAndSetBar : function()\n    {\n      var self = this;\n      this.assertEquals(\"foo\", this.__history._readState(), \"check1\");\n      this.__history.addToHistory(\"bar\", \"Title Bar\");\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.__checkBarAndGoBack();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n\n    __checkBarAndGoBack : function()\n    {\n      var self = this;\n      this.assertEquals(\"bar\", this.__history._readState(), \"check2\");\n      history.back();\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.__checkState();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n\n    __checkState : function()\n    {\n      this.assertEquals(\"foo\", this.__history._readState(), \"check3\");\n      this.assertEquals(\"Title Foo\", this.__history.getTitle());\n    },\n\n\n    testNavigateBackAfterSetState : function()\n    {\n      this.__history.setState(\"affe\");\n\n      var self = this;\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.__setState_checkAffeAndSetFoo();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n\n    __setState_checkAffeAndSetFoo : function()\n    {\n      var self = this;\n      this.assertEquals(\"affe\", this.__history._readState(), \"check0\");\n      this.__history.setState(\"foo\");\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.__setState_checkFooAndSetBar();\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n\n    __setState_checkFooAndSetBar : function()\n    {\n      var self = this;\n      this.assertEquals(\"foo\", this.__history._readState(), \"check1\");\n      this.__history.setState(\"bar\");\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.__setState_checkBarAndGoBack();\n        }, self);\n      }, 300);\n      this.wait();\n    },\n\n\n    __setState_checkBarAndGoBack : function()\n    {\n      var self = this;\n      this.assertEquals(\"bar\", this.__history._readState(), \"check2\");\n      history.back();\n      window.setTimeout(function() {\n        self.resume(function() {\n          this.assertEquals(\"foo\", this.__history._readState(), \"check3\");\n        }, self);\n      }, 200);\n      this.wait();\n    },\n\n\n    testRequestEvent : function()\n    {\n      // \"request\" event just will be fired, if a user goes back or forward in\n      // the history\n      var self = this;\n      this.__history.addListenerOnce(\"request\", function() {\n        self.resume(function() {\n          // \"request\" event has been fired\n          this.assertTrue(true);\n        }, self);\n      }, this);\n\n      this.__history.setState(\"bar\");\n      history.back();\n      this.wait();\n    },\n\n\n    testRequestEventAddHistory : function()\n    {\n      this.__history.addListenerOnce(\"request\", function(ev) {\n        this.resume(function() {\n          this.assertEquals(\"baz\", ev.getData());\n        }, this);\n      }, this);\n\n      var self = this;\n      window.setTimeout(function() {\n        self.__history.addToHistory(\"baz\");\n      }, 250);\n\n      this.wait(500);\n    }\n  }\n});\n"
  ]
}