{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/bom/request/Script.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "test",
    "io",
    "MRemoteTest",
    "MRequirements",
    "MMock",
    "members",
    "setUp",
    "req",
    "bom",
    "request",
    "Script",
    "url",
    "getUrl",
    "core",
    "Environment",
    "get",
    "timeout",
    "tearDown",
    "getSandbox",
    "restore",
    "dispose",
    "assertObject",
    "script",
    "open",
    "send",
    "_getScriptElement",
    "assertFalse",
    "isInDom",
    "isDisposed",
    "assertTrue",
    "count",
    "that",
    "onload",
    "resume",
    "wait",
    "onevent",
    "spy",
    "_emit",
    "assertCalled",
    "event",
    "on",
    "assertEquals",
    "readyState",
    "status",
    "statusText",
    "setDetermineSuccess",
    "SCRIPT_LOADED",
    "isIeBelow",
    "skip",
    "onerror",
    "assertNull",
    "ontimeout",
    "requestPending",
    "assertIdentical",
    "_getUrl",
    "assert",
    "assertMatch",
    "src",
    "abort",
    "isIe",
    "noCache",
    "assertNotCalled",
    "assertException",
    "setRequestHeader",
    "readyStates",
    "onreadystatechange",
    "push",
    "assertArrayEquals",
    "onloadend",
    "Error",
    "supportsErrorHandler",
    "onabort",
    "customUrl",
    "sleep",
    "require",
    "elem",
    "parentNode",
    "version",
    "isLegacyIe",
    "isOpera",
    "Date",
    "valueOf",
    "msg",
    "RequirementError"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n************************************************************************ */\n\n/**\n *\n * @asset(qx/test/jsonp_primitive.php)\n * @asset(qx/test/script.js)\n * @asset(qx/test/xmlhttp/sample.txt)\n * @ignore(SCRIPT_LOADED)\n */\n\nqx.Class.define(\"qx.test.bom.request.Script\",\n{\n  extend : qx.dev.unit.TestCase,\n\n  include : [qx.test.io.MRemoteTest,\n             qx.dev.unit.MRequirements,\n             qx.dev.unit.MMock],\n\n  members :\n  {\n    setUp: function() {\n      var req = this.req = new qx.bom.request.Script();\n      this.url = this.getUrl(\"qx/test/script.js\");\n\n      // Assume timeout after 1s in Opera (no error!)\n      if (qx.core.Environment.get(\"engine.name\") === \"opera\") {\n        req.timeout = 1000;\n      }\n    },\n\n    tearDown: function() {\n      this.getSandbox().restore();\n      this.req.dispose();\n    },\n\n    //\n    // General\n    //\n\n    \"test: create instance\": function() {\n      this.assertObject(this.req);\n    },\n\n    \"test: dispose() removes script from DOM\": function() {\n      var script;\n\n      this.req.open();\n      this.req.send();\n      script = this.req._getScriptElement();\n      this.req.dispose();\n\n      this.assertFalse(this.isInDom(script));\n    },\n\n\n    \"test: isDisposed()\": function() {\n      this.assertFalse(this.req.isDisposed());\n      this.req.dispose();\n      this.assertTrue(this.req.isDisposed());\n    },\n\n\n    \"test: allow many requests with same object\": function() {\n      var count = 0,\n          that = this;\n\n      this.req.onload = function() {\n        count += 1;\n        if (count == 2) {\n          that.resume(function() {});\n          return;\n        }\n        that.request();\n      };\n\n      this.request();\n      this.wait();\n    },\n\n    //\n    // Event helper\n    //\n\n    \"test: call event handler\": function() {\n      var req = this.req;\n      req.onevent = this.spy();\n      req._emit(\"event\");\n      this.assertCalled(req.onevent);\n    },\n\n    \"test: fire event\": function(){\n      var req = this.req;\n      var event = this.spy();\n      req.onevent = this.spy();\n      req.on(\"event\", event);\n      req._emit(\"event\");\n      this.assertCalled(event);\n    },\n\n    //\n    // Properties\n    //\n\n    \"test: properties indicate success when request completed\": function() {\n      var that = this,\n          req = this.req;\n\n      req.onload = function() {\n        that.resume(function() {\n          that.assertEquals(4, req.readyState);\n          that.assertEquals(200, req.status);\n          that.assertEquals(\"200\", req.statusText);\n        });\n      };\n\n      this.request();\n      this.wait();\n    },\n\n    /**\n     * @ignore(SCRIPT_LOADED)\n     */\n    \"test: status indicates success when determineSuccess returns true\": function() {\n      var that = this;\n\n      this.req.onload = function() {\n        that.resume(function() {\n          that.assertEquals(200, that.req.status);\n        });\n      };\n\n      this.req.setDetermineSuccess(function() {\n        return SCRIPT_LOADED === true;\n      });\n\n      this.request(this.getUrl(\"qx/test/script.js\"));\n      this.wait();\n    },\n\n    // Error handling\n\n    \"test: properties indicate failure when request failed\": function() {\n\n      // Known to fail in legacy IEs\n      if (this.isIeBelow(9)) {\n        this.skip();\n      }\n\n      var that = this,\n          req = this.req;\n\n      req.onerror = function() {\n        that.resume(function() {\n          that.assertEquals(4, req.readyState);\n          that.assertEquals(0, req.status);\n          that.assertNull(req.statusText);\n        });\n      };\n\n      this.request(\"http://fail.tld\");\n      this.wait(15000);\n    },\n\n    \"test: properties indicate failure when request timed out\": function() {\n\n      // Known to fail in legacy IEs\n      if (this.isIeBelow(9)) {\n        this.skip();\n      }\n\n      var that = this,\n          req = this.req;\n\n      req.timeout = 25;\n      req.ontimeout = function() {\n        that.resume(function() {\n          that.assertEquals(4, req.readyState);\n          that.assertEquals(0, req.status);\n          that.assertNull(req.statusText);\n        });\n      };\n\n      this.requestPending();\n      this.wait();\n    },\n\n    \"test: status indicates failure when determineSuccess returns false\": function() {\n      var that = this;\n\n      this.req.onload = function() {\n        that.resume(function() {\n          that.assertEquals(500, that.req.status);\n        });\n      };\n\n      this.req.setDetermineSuccess(function() {\n        return false;\n      });\n\n      this.request();\n      this.wait();\n    },\n\n    \"test: reset XHR properties when reopened\": function() {\n      var req = this.req,\n          that = this;\n\n      req.onload = function() {\n        that.resume(function() {\n          req.open(\"GET\", \"/url\");\n          that.assertIdentical(1, req.readyState);\n          that.assertIdentical(0, req.status);\n          that.assertIdentical(\"\", req.statusText);\n        });\n      };\n\n      this.request();\n      this.wait();\n    },\n\n    //\n    // open()\n    //\n\n    \"test: open() stores URL\": function() {\n      this.req.open(\"GET\", this.url);\n      this.assertEquals(this.url, this.req._getUrl());\n    },\n\n    //\n    // send()\n    //\n\n    \"test: send() adds script element to DOM\": function() {\n      var req = this.req;\n\n      // Helper triggers send()\n      this.request();\n\n      this.assert(this.isInDom(req._getScriptElement()), \"Script element not in DOM\");\n    },\n\n    \"test: send() sets script src to URL\": function() {\n      this.request();\n      this.assertMatch(this.req._getScriptElement().src, /qx\\/test\\/script.js$/);\n    },\n\n    \"test: send() with data\": function() {\n      this.skip();\n    },\n\n    //\n    // abort()\n    //\n\n    \"test: abort() removes script element\": function() {\n      var req = this.req;\n\n      this.requestPending();\n      req.abort();\n\n      this.assertFalse(this.isInDom(req._getScriptElement()), \"Script element in DOM\");\n    },\n\n    \"test: abort() makes request not fire load\": function() {\n      var req = this.req;\n\n      this.spy(req, \"onload\");\n\n      if (this.isIe()) {\n        this.request(this.noCache(this.url));\n      } else {\n        this.request();\n      }\n\n      req.abort();\n\n      this.wait(300, function() {\n        this.assertNotCalled(req.onload);\n      }, this);\n    },\n\n    //\n    // setRequestHeader()\n    //\n\n    \"test: setRequestHeader() throws error when other than OPENED\": function() {\n      var req = this.req;\n\n      this.assertException(function() {\n        req.setRequestHeader();\n      }, null, \"Invalid state\");\n    },\n\n    \"test: setRequestHeader() appends to URL\": function() {\n      var req = this.req;\n\n      req.open(\"GET\", \"/affe\");\n      req.setRequestHeader(\"key1\", \"value1\");\n      req.setRequestHeader(\"key2\", \"value2\");\n\n      this.assertMatch(req._getUrl(), /key1=value1/);\n      this.assertMatch(req._getUrl(), /key2=value2/);\n    },\n\n    //\n    // Event handlers\n    //\n\n    \"test: call onload\": function() {\n\n      // More precisely, the request completes when the browser\n      // has loaded and parsed the script\n\n      var that = this;\n\n      this.req.onload = function() {\n        that.resume(function() {});\n      };\n\n      this.request();\n      this.wait();\n    },\n\n    \"test: call onreadystatechange and have appropriate readyState\": function() {\n      var req = this.req,\n          readyStates = [],\n          that = this;\n\n      req.onreadystatechange = function() {\n        readyStates.push(req.readyState);\n\n        if (req.readyState === 4) {\n          that.resume(function() {\n            that.assertArrayEquals([1, 2, 3, 4], readyStates);\n          });\n        }\n      };\n\n      if (this.isIe()) {\n        this.request(this.noCache(this.url));\n      } else {\n        this.request();\n      }\n\n      this.wait();\n    },\n\n    // Error handling\n\n    \"test: call onloadend on network error\": function() {\n      var that = this;\n\n      this.req.onloadend = function() {\n        that.resume(function() {});\n      };\n\n      this.request(\"http://fail.tld\");\n      this.wait(15000);\n    },\n\n    \"test: call onloadend when request completes\": function() {\n      var that = this;\n\n      this.req.onloadend = function() {\n        that.resume(function() {});\n      };\n\n      this.request();\n      this.wait();\n    },\n\n    \"test: not call onload when loading failed because of network error\": function() {\n\n      // Known to fail in IE < 9,\n      // i.e. all browsers using onreadystatechange event handlerattribute\n      //\n      // After a short delay, readyState progresses to \"loaded\" even\n      // though the resource could not be loaded.\n      if (this.isIeBelow(9)) {\n        this.skip();\n      }\n\n      var that = this;\n\n      this.req.onload = function() {\n        that.resume(function() {\n          throw Error(\"Called onload\");\n        });\n      };\n\n      this.req.onerror = function() {\n        that.resume();\n      };\n\n      this.request(\"http://fail.tld\");\n      this.wait(15000);\n    },\n\n    \"test: call onerror on network error\": function() {\n\n      // Known to fail in legacy IEs\n      if (this.isIeBelow(9)) {\n        this.skip();\n      }\n\n      var that = this;\n\n      this.req.onerror = function() {\n        that.resume(function() {});\n      };\n\n      this.request(\"http://fail.tld\");\n      this.wait(15000);\n    },\n\n    \"test: call onerror on invalid script\": function() {\n\n      // Known to fail in all browsers tested\n      // Native \"error\" event not fired for script element.\n      //\n      // A possible work-around is to listen to the global \"error\"\n      // event dispatched on the window.\n      this.skip();\n\n      var that = this;\n\n      this.req.onerror = function() {\n        that.resume(function() {});\n      };\n\n      // Invalid JavaScript\n      this.request(this.getUrl(\"qx/test/xmlhttp/sample.txt\"));\n\n      this.wait();\n    },\n\n    \"test: not call onerror when request exceeds timeout limit\": function() {\n      var req = this.req;\n\n      // Known to fail in browsers not supporting the error event\n      // because timeouts are used to fake the \"error\"\n      if (!this.supportsErrorHandler()) {\n        this.skip();\n      }\n\n      this.spy(req, \"onerror\");\n      req.timeout = 25;\n      this.requestPending();\n\n      this.wait(20, function() {\n        this.assertNotCalled(req.onerror);\n      }, this);\n    },\n\n    \"test: call ontimeout when request exceeds timeout limit\": function() {\n\n      // Known to fail in legacy IEs\n      if (this.isIeBelow(9)) {\n        this.skip();\n      }\n\n      var that = this;\n\n      this.req.timeout = 25;\n      this.req.ontimeout = function() {\n        that.resume(function() {});\n      };\n\n      this.requestPending();\n      this.wait();\n    },\n\n    \"test: not call ontimeout when request is within timeout limit\": function() {\n      var req = this.req,\n          that = this;\n\n      this.spy(req, \"ontimeout\");\n\n      req.onload = function() {\n        that.resume(function() {\n\n          // Assert that onload() cancels timeout\n          that.wait(350, function() {\n            that.assertNotCalled(req.ontimeout);\n          });\n\n        });\n      };\n\n      req.timeout = 300;\n      this.request();\n      this.wait();\n    },\n\n    \"test: call onabort when request was aborted\": function() {\n      var req = this.req;\n\n      this.spy(req, \"onabort\");\n      this.request();\n      req.abort();\n\n      this.assertCalled(req.onabort);\n    },\n\n    //\n    // Clean-Up\n    //\n\n    \"test: remove script from DOM when request completed\": function() {\n      var script,\n          that = this;\n\n      this.req.onload = function() {\n        that.resume(function() {\n          script = this.req._getScriptElement();\n          that.assertFalse(that.isInDom(script));\n        });\n      };\n\n      this.request();\n      this.wait();\n    },\n\n    \"test: remove script from DOM when request failed\": function() {\n      var script,\n          that = this;\n\n      // In IE < 9, \"load\" is fired instead of \"error\"\n      this.req.onerror = this.req.onload = function() {\n        that.resume(function() {\n          script = this.req._getScriptElement();\n          that.assertFalse(that.isInDom(script));\n        });\n      };\n\n      this.request(\"http://fail.tld\");\n      this.wait(15000);\n    },\n\n    \"test: remove script from DOM when request timed out\": function() {\n\n      // Known to fail in legacy IEs\n      if (this.isIeBelow(9)) {\n        this.skip();\n      }\n\n      var script,\n          that = this;\n\n      this.req.timeout = 25;\n      this.req.ontimeout = function() {\n        that.resume(function() {\n          script = that.req._getScriptElement();\n          that.assertFalse(that.isInDom(script));\n        });\n      };\n\n      this.requestPending();\n      this.wait();\n    },\n\n    request: function(customUrl) {\n      this.req.open(\"GET\", customUrl || this.url, true);\n      this.req.send();\n    },\n\n    requestPending: function(sleep) {\n      this.require([\"php\"]);\n      var url = this.noCache(this.getUrl(\"qx/test/jsonp_primitive.php\"));\n\n      // In legacy browser, a long running script request blocks subsequent requests\n      // even if the script element is removed. Keep duration very low to work around.\n      //\n      // Sleep 50ms\n      url += \"&sleep=\" + (sleep || 50);\n      this.request(url);\n    },\n\n    isInDom: function(elem) {\n      return elem.parentNode ? true : false;\n    },\n\n    isIe: function(version) {\n      return (qx.core.Environment.get(\"engine.name\") === \"mshtml\");\n    },\n\n    isIeBelow: function(version) {\n      return qx.core.Environment.get(\"engine.name\") === \"mshtml\" &&\n             qx.core.Environment.get(\"browser.documentmode\") < version;\n    },\n\n    supportsErrorHandler: function() {\n      var isLegacyIe = qx.core.Environment.get(\"engine.name\") === \"mshtml\" &&\n        qx.core.Environment.get(\"browser.documentmode\") < 9;\n\n      var isOpera = qx.core.Environment.get(\"engine.name\") === \"opera\";\n\n      return !(isLegacyIe || isOpera);\n    },\n\n    noCache: function(url) {\n      return url + \"?nocache=\" + (new Date()).valueOf();\n    },\n\n    skip: function(msg) {\n      throw new qx.dev.unit.RequirementError(null, msg);\n    }\n  }\n});\n"
  ]
}