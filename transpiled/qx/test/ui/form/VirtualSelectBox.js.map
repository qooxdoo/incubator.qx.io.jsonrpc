{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/ui/form/VirtualSelectBox.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "test",
    "ui",
    "LayoutTestCase",
    "members",
    "setUp",
    "__selectBox",
    "form",
    "VirtualSelectBox",
    "getRoot",
    "add",
    "flush",
    "tearDown",
    "destroy",
    "__simulateUiInteraction",
    "getSelection",
    "setItem",
    "getModel",
    "getItem",
    "testChangeValueEvent",
    "m",
    "data",
    "marshal",
    "Json",
    "createModel",
    "addListenerOnce",
    "e",
    "assertIdentical",
    "getData",
    "assertNull",
    "getOldData",
    "bind",
    "setModel",
    "testChangeModelWhileNotVisible",
    "selectBox",
    "setLabelPath",
    "items",
    "a",
    "b",
    "setAutoDisposeItems",
    "pop",
    "assertTrue",
    "dispose",
    "setAllowGrowDropDown",
    "setWidth",
    "open",
    "setTimeout",
    "getWidth",
    "getBounds",
    "width",
    "getChildControl",
    "resume",
    "wait"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2017 Martijn Evers, The Netherlands\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martijn Evers (mever)\n\n************************************************************************ */\nqx.Class.define(\"qx.test.ui.form.VirtualSelectBox\",\n{\n  extend : qx.test.ui.LayoutTestCase,\n\n  members :\n  {\n    setUp : function()\n    {\n      this.__selectBox = new qx.ui.form.VirtualSelectBox();\n      this.getRoot().add(this.__selectBox);\n\n      this.flush();\n    },\n\n    tearDown : function()\n    {\n      this.base(arguments);\n      this.__selectBox.destroy();\n      this.__selectBox = null;\n    },\n\n    __simulateUiInteraction : function() {\n      // focus -> array key down -> array key down -> enter\n      this.__selectBox.getSelection().setItem(0, this.__selectBox.getModel().getItem(1));\n    },\n\n    testChangeValueEvent : function()\n    {\n      var m = qx.data.marshal.Json.createModel([\"a\", \"b\"]);\n\n      this.__selectBox.addListenerOnce(\"changeValue\", function(e) {\n        this.assertIdentical(\"a\", e.getData());\n        this.assertNull(e.getOldData());\n      }.bind(this));\n\n      this.__selectBox.setModel(m);\n\n      this.__selectBox.addListenerOnce(\"changeValue\", function(e) {\n        this.assertIdentical(\"b\", e.getData());\n        this.assertIdentical(\"a\", e.getOldData());\n      }.bind(this));\n\n      this.__simulateUiInteraction();\n    },\n\n    testChangeModelWhileNotVisible : function()\n    {\n      \"use strict\";\n      var selectBox = new qx.ui.form.VirtualSelectBox(); // We don't want to use a selectbox that has been added to a layout item.\n      selectBox.setLabelPath('b');\n      var items = qx.data.marshal.Json.createModel([{\n        a: 123,\n        b: 'item 1'\n      }, {\n        a: 456,\n        b: 'item 2'\n      }]);\n      items.setAutoDisposeItems(true);\n\n      selectBox.setModel(items);\n      try {\n        items.pop();\n      } catch (e) {\n        this.assertTrue(false, \"Changing the model should not cause an exception in VirtualDropDownList#_getAvailableHeight\");\n      }\n\n      items.dispose();\n    },\n\n    \"test dropdown list same width as selectbox\" : function () {\n      \"use strict\";\n      var test = this;\n      var m = qx.data.marshal.Json.createModel([\n        \"asdddddddddddddddddddddddddddddddddddddddddddddddddddd\",\n        \"dsaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"\n      ]);\n\n      this.__selectBox.setAllowGrowDropDown(false);\n      this.__selectBox.setModel(m);\n      this.__selectBox.setWidth(150);\n\n      this.__selectBox.open();\n      this.flush();\n\n      setTimeout(function () {\n        test.assertIdentical(test.__selectBox.getWidth(), test.__selectBox.getBounds().width);\n        test.assertIdentical(test.__selectBox.getWidth(), test.__selectBox.getChildControl('dropdown').getBounds().width);\n        test.resume();\n      }, 10);\n\n      this.wait();\n    },\n\n    \"test dropdown list wider than selectbox\" : function () {\n      \"use strict\";\n      var test = this;\n      var m = qx.data.marshal.Json.createModel([\n        \"asddddddddddddddddddddddddddddddddddddddddddddddddddddasddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd\",\n        \"dsaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"\n      ]);\n\n      this.__selectBox.setAllowGrowDropDown(true);\n      this.__selectBox.setModel(m);\n      this.__selectBox.setWidth(150);\n\n      this.__selectBox.open();\n      this.flush();\n\n      setTimeout(function () {\n        test.assertIdentical(test.__selectBox.getWidth(), test.__selectBox.getBounds().width);\n        test.assertTrue(test.__selectBox.getChildControl('dropdown').getBounds().width > 666, \"dropdown could not fit the whole item\");\n        test.resume();\n      }, 10);\n\n      this.wait();\n    }\n  }\n});\n"
  ]
}