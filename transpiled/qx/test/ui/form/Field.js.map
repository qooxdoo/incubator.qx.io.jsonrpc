{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/ui/form/Field.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "test",
    "ui",
    "LayoutTestCase",
    "include",
    "dev",
    "unit",
    "MRequirements",
    "MMock",
    "members",
    "hasWebFontSupport",
    "browser",
    "core",
    "Environment",
    "get",
    "version",
    "tearDown",
    "getSandbox",
    "restore",
    "bom",
    "webfonts",
    "Manager",
    "getInstance",
    "dispose",
    "$$instance",
    "testSelectTextAllBeforeFlush",
    "textfield",
    "form",
    "TextField",
    "getRoot",
    "add",
    "focus",
    "selectAllText",
    "flush",
    "self",
    "wait",
    "assertEquals",
    "getTextSelection",
    "destroy",
    "testSelectAllTextAfterFlush",
    "testClearTextSelectionBeforeFlush",
    "clearTextSelection",
    "testClearTextSelectionAfterFlush",
    "testGetTextSelectionStartEndAfterFlush",
    "setTextSelection",
    "getTextSelectionStart",
    "getTextSelectionEnd",
    "testGetTextSelectionStartEndBeforeFlush",
    "testApplyWebFont",
    "require",
    "tf",
    "f",
    "WebFont",
    "set",
    "size",
    "family",
    "sources",
    "source",
    "util",
    "ResourceManager",
    "toUri",
    "statusChangeSpy",
    "spy",
    "setFont",
    "event",
    "Timer",
    "once",
    "resume",
    "assertCalledTwice",
    "Field"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/* ************************************************************************\n************************************************************************ */\n/**\n *\n * @asset(qx/test/webfonts/*)\n */\n\nqx.Class.define(\"qx.test.ui.form.Field\",\n{\n  extend : qx.test.ui.LayoutTestCase,\n\n  include : [qx.dev.unit.MRequirements, qx.dev.unit.MMock],\n\n  members :\n  {\n    hasWebFontSupport : function()\n    {\n      var browser = qx.core.Environment.get(\"browser.name\");\n      var version = qx.core.Environment.get(\"browser.version\");\n      if ((browser == \"firefox\" && version < 3.5) ||\n          (browser == \"opera\" && version < 10))\n      {\n        return false;\n      }\n      return true;\n    },\n\n    tearDown : function() {\n      this.getSandbox().restore();\n      qx.bom.webfonts.Manager.getInstance().dispose();\n      delete qx.bom.webfonts.Manager.$$instance;\n    },\n\n    testSelectTextAllBeforeFlush : function()\n    {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      textfield.selectAllText();\n\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function() {\n        self.assertEquals(\"affe\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n\n    testSelectAllTextAfterFlush : function()\n    {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      this.flush();\n\n      textfield.selectAllText();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function() {\n        self.assertEquals(\"affe\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n\n    testClearTextSelectionBeforeFlush : function()\n    {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      textfield.selectAllText();\n      textfield.clearTextSelection();\n\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(100, function() {\n        self.assertEquals(\"\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n\n    testClearTextSelectionAfterFlush : function()\n    {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function() {\n        textfield.selectAllText();\n        textfield.clearTextSelection();\n        self.assertEquals(\"\", textfield.getTextSelection());\n        textfield.destroy();\n      });\n    },\n\n\n    testGetTextSelectionStartEndAfterFlush : function()\n    {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(1000, function() {\n        textfield.setTextSelection(1, 2);\n        self.assertEquals(1, textfield.getTextSelectionStart());\n        self.assertEquals(2, textfield.getTextSelectionEnd());\n        textfield.destroy();\n      });\n    },\n\n\n    testGetTextSelectionStartEndBeforeFlush : function()\n    {\n      var textfield = new qx.ui.form.TextField(\"affe\");\n      this.getRoot().add(textfield);\n\n      textfield.focus();\n      textfield.setTextSelection(2, 3);\n\n      this.flush();\n\n      // test this asynchronous because opera 9.x seems to cache the creation of DOM elements\n      var self = this;\n      this.wait(100, function() {\n        self.assertEquals(2, textfield.getTextSelectionStart());\n        self.assertEquals(3, textfield.getTextSelectionEnd());\n        textfield.destroy();\n      });\n    },\n\n    testApplyWebFont : function() {\n      this.require([\"webFontSupport\"]);\n      var tf = new qx.ui.form.TextField(\"Laugh while you can, monkey boy!\");\n\n      var f = new qx.bom.webfonts.WebFont();\n      f.set({\n        size: 18,\n        family: [\"monospace\"],\n        sources:\n        [\n          {\n            family : \"FinelinerScriptRegular\",\n            source: [ qx.util.ResourceManager.getInstance().toUri(\"qx/test/webfonts/fineliner_script-webfont.woff\"),\n                      qx.util.ResourceManager.getInstance().toUri(\"qx/test/webfonts/fineliner_script-webfont.ttf\"),\n                      qx.util.ResourceManager.getInstance().toUri(\"qx/test/webfonts/fineliner_script-webfont.eot\") ]\n          },\n          {\n            family : \"YanoneKaffeesatzRegular\",\n            source: [ qx.util.ResourceManager.getInstance().toUri(\"qx/test/webfonts/yanonekaffeesatz-regular-webfont.woff\"),\n                      qx.util.ResourceManager.getInstance().toUri(\"qx/test/webfonts/yanonekaffeesatz-regular-webfont.ttf\"),\n                      qx.util.ResourceManager.getInstance().toUri(\"qx/test/webfonts/yanonekaffeesatz-regular-webfont.eot\") ]\n          }\n        ]\n      });\n\n      var statusChangeSpy = this.spy(tf, \"_onWebFontStatusChange\");\n      tf.setFont(f);\n\n      qx.event.Timer.once(function() {\n        this.resume(function() {\n          tf.dispose();\n          f.dispose();\n          this.assertCalledTwice(statusChangeSpy);\n        }, this);\n      }, this, 4000);\n\n      this.wait(8000);\n    }\n  }\n});\n"
  ]
}