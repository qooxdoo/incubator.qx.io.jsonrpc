{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/dev/unit/Sinon.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MMock",
    "MRequirements",
    "members",
    "sinon",
    "setUp",
    "Sinon",
    "getSinon",
    "core",
    "Object",
    "getKind",
    "test",
    "Animal",
    "scratch",
    "Affe",
    "climb",
    "assertObject",
    "assertFunction",
    "spy",
    "stub",
    "mock",
    "useFakeTimers",
    "useFakeXMLHttpRequest",
    "assertException",
    "fail",
    "assertTrue",
    "called",
    "whoami",
    "returns",
    "assertEquals",
    "PROP",
    "undefined",
    "getSandbox",
    "restore",
    "setting",
    "Environment",
    "withArgs",
    "get",
    "name",
    "version",
    "obj",
    "method",
    "expects",
    "once",
    "verify",
    "never",
    "Error",
    "assertCalled",
    "require",
    "nxhr",
    "window",
    "XMLHttpRequest",
    "req",
    "getRequests",
    "open",
    "send",
    "useFakeServer",
    "server",
    "getServer",
    "respond",
    "respondWith",
    "status",
    "responseText",
    "fakeReq",
    "func",
    "xhr",
    "ActiveXObject",
    "assertUndefined",
    "a",
    "deepStub",
    "dispose",
    "Gibbon",
    "shallowStub",
    "injectStub",
    "affe",
    "assertFalse",
    "dance",
    "revealMock",
    "hasXhr",
    "tearDown",
    "undefine"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;;;;;;;;;;;;;;;;;;AAkBA;;;;AAIA;;;;;AAKAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,wBAAhB,EACA;AACEC,IAAAA,MAAM,EAAGN,EAAE,CAACO,GAAH,CAAOC,IAAP,CAAYC,QADvB;AAGEC,IAAAA,OAAO,EAAG,CAACV,EAAE,CAACO,GAAH,CAAOC,IAAP,CAAYG,KAAb,EACCX,EAAE,CAACO,GAAH,CAAOC,IAAP,CAAYI,aADb,CAHZ;AAMEC,IAAAA,OAAO,EACP;AACEC,MAAAA,KAAK,EAAE,IADT;;AAGE;;;;;AAKAC,MAAAA,KAAK,EAAG,iBACR;AACE,aAAKD,KAAL,GAAad,EAAE,CAACO,GAAH,CAAOC,IAAP,CAAYQ,KAAZ,CAAkBC,QAAlB,EAAb;AAEAjB,QAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,gBAAhB,EAAkC;AAChCC,UAAAA,MAAM,EAAEN,EAAE,CAACkB,IAAH,CAAQC,MADgB;AAEhCN,UAAAA,OAAO,EAAE;AACPO,YAAAA,OAAO,EAAE,mBAAW;AAAE,qBAAO,QAAP;AAAkB;AADjC;AAFuB,SAAlC;AAOApB,QAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,cAAhB,EAAgC;AAC9BC,UAAAA,MAAM,EAAEN,EAAE,CAACqB,IAAH,CAAQC,MADc;AAE9BT,UAAAA,OAAO,EAAE;AACPU,YAAAA,OAAO,EAAE,mBAAW;AAAE,qBAAO,IAAP;AAAc;AAD7B;AAFqB,SAAhC;AAOAvB,QAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,gBAAhB,EAAkC;AAChCC,UAAAA,MAAM,EAAEN,EAAE,CAACqB,IAAH,CAAQG,IADgB;AAEhCX,UAAAA,OAAO,EAAE;AACPY,YAAAA,KAAK,EAAE,iBAAW;AAAE,qBAAO,IAAP;AAAc;AAD3B;AAFuB,SAAlC;AAMD,OAhCH;AAkCE,yBAAmB,wBAAW;AAC5B,YAAIX,KAAK,GAAG,KAAKA,KAAjB;AAEA,aAAKY,YAAL,CAAkBZ,KAAlB,EAAyB,iBAAzB;AACA,aAAKa,cAAL,CAAoBb,KAAK,CAACc,GAA1B,EAA+B,QAA/B;AACA,aAAKD,cAAL,CAAoBb,KAAK,CAACe,IAA1B,EAAgC,SAAhC;AACA,aAAKF,cAAL,CAAoBb,KAAK,CAACgB,IAA1B,EAAgC,SAAhC;AACA,aAAKH,cAAL,CAAoBb,KAAK,CAACiB,aAA1B,EAAyC,gBAAzC;AACA,aAAKJ,cAAL,CAAoBb,KAAK,CAACkB,qBAA1B,EAAiD,aAAjD;AACD,OA3CH;AA6CE,oBAAc,oBAAW;AACvB,YAAIlB,KAAK,GAAG,KAAKA,KAAjB;AACA,aAAKmB,eAAL,CAAqB,YAAW;AAC9BnB,UAAAA,KAAK,CAACoB,IAAN;AACD,SAFD;AAGD,OAlDH;AAoDE,mBAAa,mBAAW;AACtB,YAAIN,GAAG,GAAG,KAAKd,KAAL,CAAWc,GAAX,EAAV;AACAA,QAAAA,GAAG;AACH,aAAKO,UAAL,CAAgBP,GAAG,CAACQ,MAApB;AACD,OAxDH;AA0DE,gCAA0B,+BAAW;AACnC,YAAIR,GAAG,GAAG,KAAKA,GAAL,EAAV;AACAA,QAAAA,GAAG;AACH,aAAKO,UAAL,CAAgBP,GAAG,CAACQ,MAApB;AACD,OA9DH;AAgEE,oBAAc,oBAAW;AACvB,YAAIC,MAAM,GAAG,KAAKvB,KAAL,CAAWe,IAAX,EAAb;AACAQ,QAAAA,MAAM,CAACC,OAAP,CAAe,MAAf;AAEA,aAAKC,YAAL,CAAkB,MAAlB,EAA0BF,MAAM,EAAhC;AACD,OArEH;AAuEE,iCAA2B,gCAAW;AACpC,YAAIA,MAAM,GAAG,KAAKR,IAAL,EAAb;AACAQ,QAAAA,MAAM,CAACC,OAAP,CAAe,MAAf;AAEA,aAAKC,YAAL,CAAkB,MAAlB,EAA0BF,MAAM,EAAhC;AACD,OA5EH;AA8EE,6BAAuB,4BAAW;AAChCrC,QAAAA,EAAE,CAACqB,IAAH,CAAQmB,IAAR,GAAe,KAAf;AAEA,aAAKX,IAAL,CAAU7B,EAAE,CAACqB,IAAb,EAAmB,MAAnB,EAA2B,IAA3B;AACA,aAAKkB,YAAL,CAAkB,IAAlB,EAAwBvC,EAAE,CAACqB,IAAH,CAAQmB,IAAhC;AAEAxC,QAAAA,EAAE,CAACqB,IAAH,CAAQmB,IAAR,GAAeC,SAAf;AACD,OArFH;AAuFE,0CAAoC,uCAAW;AAC7CzC,QAAAA,EAAE,CAACqB,IAAH,CAAQmB,IAAR,GAAe,KAAf;AAEA,aAAKX,IAAL,CAAU7B,EAAE,CAACqB,IAAb,EAAmB,MAAnB,EAA2B,IAA3B;AACA,aAAKqB,UAAL,GAAkBC,OAAlB;AACA,aAAKJ,YAAL,CAAkB,KAAlB,EAAyBvC,EAAE,CAACqB,IAAH,CAAQmB,IAAjC;AAEAxC,QAAAA,EAAE,CAACqB,IAAH,CAAQmB,IAAR,GAAeC,SAAf;AACD,OA/FH;AAiGE,wCAAkC,sCAAW;AAC3C,YAAIG,OAAO,GAAG,KAAKf,IAAL,CAAU7B,EAAE,CAACkB,IAAH,CAAQ2B,WAAlB,EAA+B,KAA/B,EAAsCC,QAAtC,CAA+C,cAA/C,CAAd;AACAF,QAAAA,OAAO,CAACN,OAAR,CAAgB,YAAhB;AACA,aAAKC,YAAL,CAAkB,YAAlB,EAAgCvC,EAAE,CAACkB,IAAH,CAAQ2B,WAAR,CAAoBE,GAApB,CAAwB,cAAxB,CAAhC;AACD,OArGH;AAuGE,qDAA+C,iDAAW;AACxD,YAAIC,IAAI,GAAGhD,EAAE,CAACkB,IAAH,CAAQ2B,WAAR,CAAoBE,GAApB,CAAwB,cAAxB,CAAX;AAAA,YACIE,OAAO,GAAGjD,EAAE,CAACkB,IAAH,CAAQ2B,WAAR,CAAoBE,GAApB,CAAwB,iBAAxB,CADd;AAAA,YAEIH,OAAO,GAAG,KAAKf,IAAL,CAAU7B,EAAE,CAACkB,IAAH,CAAQ2B,WAAlB,EAA+B,KAA/B,EAAsCC,QAAtC,CAA+C,cAA/C,CAFd;AAGAF,QAAAA,OAAO,CAACN,OAAR,CAAgB,YAAhB;AACA,aAAKI,UAAL,GAAkBC,OAAlB;AACA,aAAKJ,YAAL,CAAkBS,IAAlB,EAAwBhD,EAAE,CAACkB,IAAH,CAAQ2B,WAAR,CAAoBE,GAApB,CAAwB,cAAxB,CAAxB;AACA,aAAKR,YAAL,CAAkBU,OAAlB,EAA2BjD,EAAE,CAACkB,IAAH,CAAQ2B,WAAR,CAAoBE,GAApB,CAAwB,iBAAxB,CAA3B;AACD,OA/GH;AAiHE,oBAAc,oBAAW;AACvB,YAAIG,GAAG,GAAG;AAACC,UAAAA,MAAM,EAAE,kBAAW,CAAE;AAAtB,SAAV;AACA,YAAIrB,IAAI,GAAG,KAAKhB,KAAL,CAAWgB,IAAX,CAAgBoB,GAAhB,CAAX;AACApB,QAAAA,IAAI,CAACsB,OAAL,CAAa,QAAb,EAAuBC,IAAvB;AAEAH,QAAAA,GAAG,CAACC,MAAJ;AACArB,QAAAA,IAAI,CAACwB,MAAL;AACD,OAxHH;AA0HE,kCAA4B,gCAAW;AACrC,YAAIJ,GAAG,GAAG;AAACC,UAAAA,MAAM,EAAE,kBAAW,CAAE;AAAtB,SAAV;AACA,YAAIrB,IAAI,GAAG,KAAKhB,KAAL,CAAWgB,IAAX,CAAgBoB,GAAhB,CAAX;AACApB,QAAAA,IAAI,CAACsB,OAAL,CAAa,QAAb,EAAuBC,IAAvB;AAEA,aAAKpB,eAAL,CAAqB,YAAW;AAC9BH,UAAAA,IAAI,CAACwB,MAAL;AACD,SAFD;AAGD,OAlIH;AAoIE,0CAAoC,uCAAW;AAC7C,YAAIJ,GAAG,GAAG;AAACC,UAAAA,MAAM,EAAE,kBAAW,CAAE;AAAtB,SAAV;AACA,YAAIrB,IAAI,GAAG,KAAKhB,KAAL,CAAWgB,IAAX,CAAgBoB,GAAhB,CAAX;AACApB,QAAAA,IAAI,CAACsB,OAAL,CAAa,QAAb,EAAuBG,KAAvB;AAEA,aAAKtB,eAAL,CAAqB,YAAW;AAC9BiB,UAAAA,GAAG,CAACC,MAAJ;AACD,SAFD,EAEGK,KAFH,EAEU,iBAFV;AAGD,OA5IH;AA8IE,sBAAgB,sBAAW;AACzB,YAAI5B,GAAG,GAAG,KAAKd,KAAL,CAAWc,GAAX,EAAV;AACAA,QAAAA,GAAG;AACH,aAAK6B,YAAL,CAAkB7B,GAAlB;AACD,OAlJH;AAoJE,wBAAkB,uBAAW;AAC3B,aAAK8B,OAAL,CAAa,CAAC,KAAD,CAAb;;AAEA,aAAK1B,qBAAL;AACA,YAAI2B,IAAI,GAAGC,MAAM,CAACC,cAAlB;AACA,YAAIF,IAAJ;AACA,YAAIG,GAAG,GAAG,KAAKC,WAAL,GAAmB,CAAnB,CAAV;AAEA,aAAKpC,cAAL,CAAoBgC,IAAI,CAAChB,OAAzB,EAAkC,SAAlC;AACA,aAAKhB,cAAL,CAAoBmC,GAAG,CAACE,IAAxB,EAA8B,MAA9B;AACA,aAAKrC,cAAL,CAAoBmC,GAAG,CAACG,IAAxB,EAA8B,MAA9B;AACD,OA/JH;AAiKE,2BAAqB,0BAAW;AAC9B,aAAKC,aAAL;AACA,YAAIC,MAAM,GAAG,KAAKC,SAAL,EAAb;AACA,aAAKzC,cAAL,CAAoBwC,MAAM,CAACE,OAA3B;AACA,aAAK1C,cAAL,CAAoBwC,MAAM,CAACG,WAA3B;AACD,OAtKH;AAwKE,uBAAiB,uBAAW;AAC1B,aAAKZ,OAAL,CAAa,CAAC,KAAD,CAAb;;AAEA,aAAKQ,aAAL;AACA,YAAIP,IAAI,GAAGC,MAAM,CAACC,cAAlB;AAAA,YACIC,GAAG,GAAG,IAAIH,IAAJ,EADV;AAAA,YAEIQ,MAAM,GAAG,KAAKC,SAAL,EAFb;AAIAD,QAAAA,MAAM,CAACG,WAAP,CAAmB,KAAnB,EAA0B,OAA1B,EAAmC,CAAC,GAAD,EAAM,EAAN,EAAU,OAAV,CAAnC;AACAR,QAAAA,GAAG,CAACE,IAAJ,CAAS,KAAT,EAAgB,OAAhB;AACAF,QAAAA,GAAG,CAACG,IAAJ;AACAE,QAAAA,MAAM,CAACE,OAAP;AAEA,aAAK9B,YAAL,CAAkB,GAAlB,EAAuBuB,GAAG,CAACS,MAA3B;AACA,aAAKhC,YAAL,CAAkB,OAAlB,EAA2BuB,GAAG,CAACU,YAA/B;AACD,OAvLH;AAyLE,wCAAkC,qCAAW;AAC3C,aAAKd,OAAL,CAAa,CAAC,KAAD,CAAb;;AAEA,aAAK1B,qBAAL;AACA,YAAI2B,IAAI,GAAGC,MAAM,CAACC,cAAlB;AAAA,YACAC,GAAG,GAAG,IAAIH,IAAJ,EADN;AAAA,YAEAc,OAAO,GAAG,KAAKV,WAAL,GAAmB,CAAnB,CAFV;AAIAD,QAAAA,GAAG,CAACE,IAAJ;AACAF,QAAAA,GAAG,CAACG,IAAJ;AACAQ,QAAAA,OAAO,CAACJ,OAAR,CAAgB,GAAhB,EAAqB;AAAE,0BAAgB;AAAlB,SAArB,EAA4D,SAA5D;AACD,OApMH;AAsME,mCAA6B,iCAAW;AACtC,YAAIK,IAAI,GAAG,SAAPA,IAAO,GAAW,CAAE,CAAxB;;AACA,YAAIxB,GAAG,GAAG;AAAC,eAAK,aAAW,CAAE;AAAnB,SAAV;AAEA,YAAItB,GAAG,GAAG,KAAKA,GAAL,CAAS8C,IAAT,CAAV;AACA,YAAI7C,IAAI,GAAG,KAAKA,IAAL,CAAUqB,GAAV,EAAe,GAAf,CAAX;AACA,YAAIyB,GAAG,GAAG,KAAK3C,qBAAL,EAAV;AACA,YAAI2B,IAAI,GAAGC,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAACgB,aAAP,CAAqB,mBAArB,CAApC;AAEA,aAAKlC,UAAL,GAAkBC,OAAlB;AACA,aAAKkC,eAAL,CAAqBH,IAAI,CAACtC,MAA1B;AACA,aAAKyC,eAAL,CAAqB3B,GAAG,CAAC4B,CAAJ,CAAM1C,MAA3B;AACA,aAAKyC,eAAL,CAAqBlB,IAAI,CAAChB,OAA1B;AACD,OAnNH;AAqNE,yBAAmB,wBAAW;AAC5B,YAAIO,GAAG,GAAG,IAAIlD,EAAE,CAACqB,IAAH,CAAQG,IAAZ,EAAV;AACI0B,QAAAA,GAAG,GAAG,KAAK6B,QAAL,CAAc7B,GAAd,CAAN;AACJA,QAAAA,GAAG,CAAC9B,OAAJ;AACA,aAAKqC,YAAL,CAAkBP,GAAG,CAAC9B,OAAtB;AACA8B,QAAAA,GAAG,CAAC8B,OAAJ;AACD,OA3NH;AA6NE,4BAAsB,2BAAW;AAC/B,YAAI9B,GAAG,GAAG,IAAIlD,EAAE,CAACqB,IAAH,CAAQ4D,MAAZ,EAAV;AACI/B,QAAAA,GAAG,GAAG,KAAKgC,WAAL,CAAiBhC,GAAjB,EAAsBlD,EAAE,CAACqB,IAAH,CAAQG,IAA9B,CAAN;AAEJ0B,QAAAA,GAAG,CAACzB,KAAJ;AACAyB,QAAAA,GAAG,CAAC3B,OAAJ;AACA,aAAKkC,YAAL,CAAkBP,GAAG,CAACzB,KAAtB;AACA,aAAKgC,YAAL,CAAkBP,GAAG,CAAC3B,OAAtB,EAP+B,CAS/B;;AACA,aAAKgB,YAAL,CAAkB,QAAlB,EAA4BW,GAAG,CAAC9B,OAAJ,EAA5B,EAA2C,sBAA3C;AACA,aAAKyD,eAAL,CAAqB3B,GAAG,CAAC9B,OAAJ,CAAYgB,MAAjC,EAAyC,qBAAzC;AACAc,QAAAA,GAAG,CAAC8B,OAAJ;AACD,OA1OH;AA4OE,uCAAiC,oCAAW;AAC1C,aAAKG,UAAL,CAAgBnF,EAAE,CAACqB,IAAnB,EAAyB,MAAzB;AACA,YAAI+D,IAAI,GAAG,IAAIpF,EAAE,CAACqB,IAAH,CAAQG,IAAZ,EAAX;AAEA4D,QAAAA,IAAI,CAAC7D,OAAL,CAAae,OAAb,CAAqB,KAArB;AACA,aAAK+C,WAAL,CAAiBD,IAAI,CAAC7D,OAAL,EAAjB;AACA6D,QAAAA,IAAI,CAACJ,OAAL;AACD,OAnPH;AAqPE,kDAA4C,6CAAW;AACrD,YAAInD,IAAI,GAAG,KAAKsD,UAAL,CAAgBnF,EAAE,CAACqB,IAAnB,EAAyB,MAAzB,CAAX;AAAA,YACI+D,IAAI,GAAG,IAAIpF,EAAE,CAACqB,IAAH,CAAQG,IAAZ,EADX;AAGAK,QAAAA,IAAI,CAACN,OAAL,CAAae,OAAb,CAAqB,KAArB;AACA,aAAK+C,WAAL,CAAiBD,IAAI,CAAC7D,OAAL,EAAjB;AACA6D,QAAAA,IAAI,CAACJ,OAAL;AACD,OA5PH;AA8PE,kCAA4B,gCAAW;AACrC,aAAKG,UAAL,CAAgBnF,EAAE,CAACqB,IAAnB,EAAyB,MAAzB,EAAiC,KAAKQ,IAAL,CAAU;AAAEyD,UAAAA,KAAK,EAAE,iBAAU,CAAE;AAArB,SAAV,CAAjC;AACA,YAAIF,IAAI,GAAG,IAAIpF,EAAE,CAACqB,IAAH,CAAQG,IAAZ,EAAX;AAEA4D,QAAAA,IAAI,CAACE,KAAL;AACA,aAAK7B,YAAL,CAAkB2B,IAAI,CAACE,KAAvB;AACD,OApQH;AAsQE,6CAAuC,yCAAW;AAChD,YAAIzD,IAAI,GAAG,KAAKsD,UAAL,CAAgBnF,EAAE,CAACqB,IAAnB,EAAyB,MAAzB,EAAiC,KAAKQ,IAAL,CAAU;AAAEyD,UAAAA,KAAK,EAAE,iBAAU,CAAE;AAArB,SAAV,CAAjC,CAAX;AAAA,YACIF,IAAI,GAAG,IAAIpF,EAAE,CAACqB,IAAH,CAAQG,IAAZ,EADX;AAGA4D,QAAAA,IAAI,CAACE,KAAL;AACA,aAAK7B,YAAL,CAAkB5B,IAAI,CAACyD,KAAvB;AACD,OA5QH;AA8QE,kDAA4C,6CAAW;AACrD,YAAIxD,IAAI,GAAG,KAAKyD,UAAL,CAAgBvF,EAAE,CAACqB,IAAnB,EAAyB,MAAzB,CAAX;AAAA,YACI+D,IAAI,GAAG,IAAIpF,EAAE,CAACqB,IAAH,CAAQG,IAAZ,EADX;AAGAM,QAAAA,IAAI,CAACsB,OAAL,CAAa,SAAb,EAAwBC,IAAxB;AACA+B,QAAAA,IAAI,CAAC7D,OAAL;AACAO,QAAAA,IAAI,CAACwB,MAAL;AACA8B,QAAAA,IAAI,CAACJ,OAAL;AACD,OAtRH;AAwRE,gDAA0C,2CAAW;AACnD,YAAIlD,IAAI,GAAG,KAAKyD,UAAL,CAAgBvF,EAAE,CAACqB,IAAnB,EAAyB,MAAzB,EAAiC;AAAEiE,UAAAA,KAAK,EAAE,iBAAW,CAAE;AAAtB,SAAjC,CAAX;AAAA,YACIF,IAAI,GAAG,IAAIpF,EAAE,CAACqB,IAAH,CAAQG,IAAZ,EADX;AAGAM,QAAAA,IAAI,CAACsB,OAAL,CAAa,OAAb,EAAsBC,IAAtB;AACA+B,QAAAA,IAAI,CAACE,KAAL;AACAxD,QAAAA,IAAI,CAACwB,MAAL;AACD,OA/RH;AAiSEkC,MAAAA,MAAM,EAAE,kBAAW;AACjB,eAAOxF,EAAE,CAACkB,IAAH,CAAQ2B,WAAR,CAAoBE,GAApB,CAAwB,QAAxB,MAAsC,KAA7C;AACD,OAnSH;AAqSE0C,MAAAA,QAAQ,EAAG,oBACX;AACE,aAAK/C,UAAL,GAAkBC,OAAlB;AACA,aAAK7B,KAAL,GAAa,IAAb;AAEAd,QAAAA,EAAE,CAACI,KAAH,CAASsF,QAAT,CAAkB,cAAlB;AACA1F,QAAAA,EAAE,CAACI,KAAH,CAASsF,QAAT,CAAkB,gBAAlB;AACA1F,QAAAA,EAAE,CAACI,KAAH,CAASsF,QAAT,CAAkB,gBAAlB;AACD;AA7SH;AAPF,GADA;AA3BA1F,EAAAA,EAAE,CAACqB,IAAH,CAAQd,GAAR,CAAYC,IAAZ,CAAiBQ,KAAjB,CAAuBb,aAAvB,GAAuCA,aAAvC",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n************************************************************************ */\n\n/**\n * @ignore(qx.test.PROP, qx.test.Affe, qx.test.Gibbon)\n */\n\n/**\n * Rudimentary tests to check that Sinon.JS is integrated correctly.\n *\n * Also serves as a collection of examples.\n */\nqx.Class.define(\"qx.test.dev.unit.Sinon\",\n{\n  extend : qx.dev.unit.TestCase,\n\n  include : [qx.dev.unit.MMock,\n             qx.dev.unit.MRequirements],\n\n  members :\n  {\n    sinon: null,\n\n    /**\n     * @ignore(qx.test.Animal)\n     * @ignore(qx.test.Affe)\n     * @ignore(qx.test.Gibbon)\n     */\n    setUp : function()\n    {\n      this.sinon = qx.dev.unit.Sinon.getSinon();\n\n      qx.Class.define(\"qx.test.Animal\", {\n        extend: qx.core.Object,\n        members: {\n          getKind: function() { return \"Animal\"; }\n        }\n      });\n\n      qx.Class.define(\"qx.test.Affe\", {\n        extend: qx.test.Animal,\n        members: {\n          scratch: function() { return true; }\n        }\n      });\n\n      qx.Class.define(\"qx.test.Gibbon\", {\n        extend: qx.test.Affe,\n        members: {\n          climb: function() { return true; }\n        }\n      });\n    },\n\n    \"test: get sinon\": function() {\n      var sinon = this.sinon;\n\n      this.assertObject(sinon, \"Sinon not found\");\n      this.assertFunction(sinon.spy, \"No spy\");\n      this.assertFunction(sinon.stub, \"No stub\");\n      this.assertFunction(sinon.mock, \"No mock\");\n      this.assertFunction(sinon.useFakeTimers, \"No fake timers\");\n      this.assertFunction(sinon.useFakeXMLHttpRequest, \"No fake XHR\");\n    },\n\n    \"test: fail\": function() {\n      var sinon = this.sinon;\n      this.assertException(function() {\n        sinon.fail();\n      });\n    },\n\n    \"test: spy\": function() {\n      var spy = this.sinon.spy();\n      spy();\n      this.assertTrue(spy.called);\n    },\n\n    \"test: spy conveniently\": function() {\n      var spy = this.spy();\n      spy();\n      this.assertTrue(spy.called);\n    },\n\n    \"test: stub\": function() {\n      var whoami = this.sinon.stub();\n      whoami.returns(\"Affe\");\n\n      this.assertEquals(\"Affe\", whoami());\n    },\n\n    \"test: stub conveniently\": function() {\n      var whoami = this.stub();\n      whoami.returns(\"Affe\");\n\n      this.assertEquals(\"Affe\", whoami());\n    },\n\n    \"test: stub property\": function() {\n      qx.test.PROP = false;\n\n      this.stub(qx.test, \"PROP\", true);\n      this.assertEquals(true, qx.test.PROP);\n\n      qx.test.PROP = undefined;\n    },\n\n    \"test: stub property in isolation\": function() {\n      qx.test.PROP = false;\n\n      this.stub(qx.test, \"PROP\", true);\n      this.getSandbox().restore();\n      this.assertEquals(false, qx.test.PROP);\n\n      qx.test.PROP = undefined;\n    },\n\n    \"test: stub environment setting\": function() {\n      var setting = this.stub(qx.core.Environment, \"get\").withArgs(\"browser.name\");\n      setting.returns(\"My Browser\");\n      this.assertEquals(\"My Browser\", qx.core.Environment.get(\"browser.name\"));\n    },\n\n    \"test: stub environment setting in isolation\": function() {\n      var name = qx.core.Environment.get(\"browser.name\"),\n          version = qx.core.Environment.get(\"browser.version\"),\n          setting = this.stub(qx.core.Environment, \"get\").withArgs(\"browser.name\");\n      setting.returns(\"My Browser\");\n      this.getSandbox().restore();\n      this.assertEquals(name, qx.core.Environment.get(\"browser.name\"));\n      this.assertEquals(version, qx.core.Environment.get(\"browser.version\"));\n    },\n\n    \"test: mock\": function() {\n      var obj = {method: function() {}};\n      var mock = this.sinon.mock(obj);\n      mock.expects(\"method\").once();\n\n      obj.method();\n      mock.verify();\n    },\n\n    \"test: mock verify throws\": function() {\n      var obj = {method: function() {}};\n      var mock = this.sinon.mock(obj);\n      mock.expects(\"method\").once();\n\n      this.assertException(function() {\n        mock.verify();\n      });\n    },\n\n    \"test: mock unexpected use throws\": function() {\n      var obj = {method: function() {}};\n      var mock = this.sinon.mock(obj);\n      mock.expects(\"method\").never();\n\n      this.assertException(function() {\n        obj.method();\n      }, Error, /Unexpected call/);\n    },\n\n    \"test: assert\": function() {\n      var spy = this.sinon.spy();\n      spy();\n      this.assertCalled(spy);\n    },\n\n    \"test: fake XHR\": function() {\n      this.require([\"xhr\"]);\n\n      this.useFakeXMLHttpRequest();\n      var nxhr = window.XMLHttpRequest;\n      new nxhr;\n      var req = this.getRequests()[0];\n\n      this.assertFunction(nxhr.restore, \"restore\");\n      this.assertFunction(req.open, \"open\");\n      this.assertFunction(req.send, \"send\");\n    },\n\n    \"test: fake server\": function() {\n      this.useFakeServer();\n      var server = this.getServer();\n      this.assertFunction(server.respond);\n      this.assertFunction(server.respondWith);\n    },\n\n    \"test: respond\": function() {\n      this.require([\"xhr\"]);\n\n      this.useFakeServer();\n      var nxhr = window.XMLHttpRequest,\n          req = new nxhr,\n          server = this.getServer();\n\n      server.respondWith(\"GET\", \"found\", [200, {}, \"FOUND\"]);\n      req.open(\"GET\", \"found\");\n      req.send();\n      server.respond();\n\n      this.assertEquals(200, req.status);\n      this.assertEquals(\"FOUND\", req.responseText);\n    },\n\n    \"test: respond with invalid XML\": function() {\n      this.require([\"xhr\"]);\n\n      this.useFakeXMLHttpRequest();\n      var nxhr = window.XMLHttpRequest,\n      req = new nxhr,\n      fakeReq = this.getRequests()[0];\n\n      req.open();\n      req.send();\n      fakeReq.respond(200, { \"Content-Type\": \"application/xml\" }, \"INVALID\");\n    },\n\n    \"test: sandbox and restore\": function() {\n      var func = function() {};\n      var obj = {\"a\": function() {}};\n\n      var spy = this.spy(func);\n      var stub = this.stub(obj, \"a\");\n      var xhr = this.useFakeXMLHttpRequest();\n      var nxhr = window.XMLHttpRequest || window.ActiveXObject(\"Microsoft.XMLHTTP\");\n\n      this.getSandbox().restore();\n      this.assertUndefined(func.called);\n      this.assertUndefined(obj.a.called);\n      this.assertUndefined(nxhr.restore);\n    },\n\n    \"test: deep stub\": function() {\n      var obj = new qx.test.Affe();\n          obj = this.deepStub(obj);\n      obj.getKind();\n      this.assertCalled(obj.getKind);\n      obj.dispose();\n    },\n\n    \"test: shallow stub\": function() {\n      var obj = new qx.test.Gibbon();\n          obj = this.shallowStub(obj, qx.test.Affe);\n\n      obj.climb();\n      obj.scratch();\n      this.assertCalled(obj.climb);\n      this.assertCalled(obj.scratch);\n\n      // Not stubbed\n      this.assertEquals(\"Animal\", obj.getKind(), \"Must return original\");\n      this.assertUndefined(obj.getKind.called, \"Must not be stubbed\");\n      obj.dispose();\n    },\n\n    \"test: inject stub of original\": function() {\n      this.injectStub(qx.test, \"Affe\");\n      var affe = new qx.test.Affe();\n\n      affe.scratch.returns(false);\n      this.assertFalse(affe.scratch());\n      affe.dispose();\n    },\n\n    \"test: inject stub of original and return\": function() {\n      var stub = this.injectStub(qx.test, \"Affe\"),\n          affe = new qx.test.Affe();\n\n      stub.scratch.returns(false);\n      this.assertFalse(affe.scratch());\n      affe.dispose();\n    },\n\n    \"test: inject custom stub\": function() {\n      this.injectStub(qx.test, \"Affe\", this.stub({ dance: function(){} }));\n      var affe = new qx.test.Affe();\n\n      affe.dance();\n      this.assertCalled(affe.dance);\n    },\n\n    \"test: inject custom stub and return\": function() {\n      var stub = this.injectStub(qx.test, \"Affe\", this.stub({ dance: function(){} })),\n          affe = new qx.test.Affe();\n\n      affe.dance();\n      this.assertCalled(stub.dance);\n    },\n\n    \"test: reveal mock of original and return\": function() {\n      var mock = this.revealMock(qx.test, \"Affe\"),\n          affe = new qx.test.Affe();\n\n      mock.expects(\"scratch\").once();\n      affe.scratch();\n      mock.verify();\n      affe.dispose();\n    },\n\n    \"test: reveal mock of custom and return\": function() {\n      var mock = this.revealMock(qx.test, \"Affe\", { dance: function() {} }),\n          affe = new qx.test.Affe();\n\n      mock.expects(\"dance\").once();\n      affe.dance();\n      mock.verify();\n    },\n\n    hasXhr: function() {\n      return qx.core.Environment.get(\"io.xhr\") === \"xhr\";\n    },\n\n    tearDown : function()\n    {\n      this.getSandbox().restore();\n      this.sinon = null;\n\n      qx.Class.undefine(\"qx.test.Affe\");\n      qx.Class.undefine(\"qx.test.Animal\");\n      qx.Class.undefine(\"qx.test.Gibbon\");\n    }\n  }\n});\n"
  ]
}