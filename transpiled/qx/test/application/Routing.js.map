{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/incubator.qx.io.jsonrpc/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/application/Routing.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "include",
    "MMock",
    "members",
    "__r",
    "__initialState",
    "setUp",
    "bom",
    "History",
    "getInstance",
    "getState",
    "application",
    "Routing",
    "tearDown",
    "setState",
    "dispose",
    "testGet",
    "handler",
    "spy",
    "onGet",
    "executeGet",
    "assertCalledOnce",
    "testBack",
    "aHandler",
    "bHandler",
    "back",
    "assertCalledTwice",
    "testBackCycle",
    "cHandler",
    "testGetCustomData",
    "a",
    "assertTrue",
    "args",
    "customData",
    "testGetCustomDataTwoInstances",
    "r2",
    "testOn",
    "on",
    "execute",
    "testPost",
    "onPost",
    "executePost",
    "testPostParam",
    "data",
    "assertCalledWith",
    "params",
    "id",
    "path",
    "testDelete",
    "onDelete",
    "executeDelete",
    "testPut",
    "onPut",
    "executePut",
    "testAny",
    "onAny",
    "testInit",
    "defaultHandler",
    "assertNotCalled",
    "init",
    "testGetPathOrFallback",
    "assertEquals",
    "_getPathOrFallback",
    "test"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2007-2012 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (wittemann)\n\n************************************************************************ */\n\nqx.Class.define(\"qx.test.application.Routing\",\n{\n  extend : qx.dev.unit.TestCase,\n  include : qx.dev.unit.MMock,\n\n  members : {\n    __r : null,\n    __initialState : null,\n\n    setUp : function() {\n      this.__initialState = qx.bom.History.getInstance().getState();\n      this.__r = new qx.application.Routing();\n    },\n\n\n    tearDown : function() {\n      qx.bom.History.getInstance().setState(this.__initialState);\n      this.__r.dispose();\n    },\n\n\n    testGet : function() {\n      var handler = this.spy();\n      this.__r.onGet(\"/abc\", handler);\n      this.__r.executeGet(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n\n    testBack : function() {\n      var aHandler = this.spy();\n      var bHandler = this.spy();\n      this.__r.onGet(\"/a\", aHandler);\n      this.__r.onGet(\"/b\", bHandler);\n      this.__r.executeGet(\"/a\");\n      this.__r.executeGet(\"/b\");\n      this.__r.back();\n      this.assertCalledTwice(aHandler);\n      this.assertCalledOnce(bHandler);\n    },\n\n    /**\n    * Tests the ability of app routing to detect and remove route cycles.\n    * After A >> B >> C >> B >> routing.back(), the routing should display A and not C.\n    */\n    testBackCycle : function() {\n      var aHandler = this.spy();\n      var bHandler = this.spy();\n      var cHandler = this.spy();\n      this.__r.onGet(\"/a\", aHandler);\n      this.__r.onGet(\"/b\", bHandler);\n      this.__r.onGet(\"/c\", cHandler);\n      this.__r.executeGet(\"/a\");\n      this.__r.executeGet(\"/b\");\n      this.__r.executeGet(\"/c\");\n      this.__r.executeGet(\"/b\");\n      this.__r.back();\n      this.assertCalledTwice(aHandler);\n      this.assertCalledTwice(bHandler);\n      this.assertCalledOnce(cHandler);\n    },\n\n    testGetCustomData : function() {\n      var handler = this.spy();\n      this.__r.onGet(\"/abc\", handler);\n      this.__r.executeGet(\"/abc\", {a: true});\n      this.assertCalledOnce(handler);\n      this.assertTrue(handler.args[0][0].customData.a);\n    },\n\n\n    testGetCustomDataTwoInstances : function() {\n      var r2 = new qx.application.Routing();\n      var handler = this.spy();\n      this.__r.onGet(\"/abc\", handler);\n      r2.executeGet(\"/abc\", {a: true});\n      this.assertCalledOnce(handler);\n      this.assertTrue(handler.args[0][0].customData.a);\n      r2.dispose();\n    },\n\n\n    testOn : function() {\n      var handler = this.spy();\n      this.__r.on(\"/\", handler);\n      this.__r.execute(\"/\");\n      this.assertCalledOnce(handler);\n    },\n\n\n    testPost : function() {\n      var handler = this.spy();\n      this.__r.onPost(\"/abc\", handler);\n      this.__r.executePost(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n\n    testPostParam : function() {\n      var handler = this.spy();\n      var data = {data: \"test\"};\n      this.__r.onPost(\"/{id}/affe\", handler);\n      this.__r.executePost(\"/123456/affe\", data, \"custom data\");\n      this.assertCalledOnce(handler);\n      this.assertCalledWith(handler,\n        {customData: \"custom data\", params: {id: \"123456\", data: \"test\"}, path: \"/123456/affe\"}\n      );\n    },\n\n\n    testDelete : function() {\n      var handler = this.spy();\n      this.__r.onDelete(\"/abc\", handler);\n      this.__r.executeDelete(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n\n    testPut : function() {\n      var handler = this.spy();\n      this.__r.onPut(\"/abc\", handler);\n      this.__r.executePut(\"/abc\");\n      this.assertCalledOnce(handler);\n    },\n\n\n    testAny : function() {\n      var handler = this.spy();\n      this.__r.onAny(\"/abc\", handler);\n      this.__r.executePost(\"/abc\");\n      this.__r.executeDelete(\"/abc\");\n      this.assertCalledTwice(handler);\n    },\n\n    testInit : function() {\n      var handler = this.spy();\n      var defaultHandler = this.spy();\n\n      this.__r.dispose();\n      this.__r = new qx.application.Routing();\n\n      this.__r.onGet(\"/a/b/c\", handler);\n      this.assertNotCalled(handler);\n      this.__r.onGet(\"/\", defaultHandler);\n      this.assertNotCalled(defaultHandler);\n\n      this.__r.init();\n      this.assertNotCalled(handler);\n      this.assertCalledOnce(defaultHandler);\n\n      qx.bom.History.getInstance().setState(\"/a/b/c\");\n      this.assertCalledOnce(handler);\n    },\n\n    testGetPathOrFallback : function() {\n      this.__r.on(\"/registered\", function(){});\n\n      this.assertEquals(\"/\", this.__r._getPathOrFallback(\"\"));\n      this.assertEquals(\"/\", this.__r._getPathOrFallback(null));\n      this.assertEquals(\"/\", this.__r._getPathOrFallback(\"/not/registered\"));\n      this.assertEquals(\"/given/default\", this.__r._getPathOrFallback(\"use_default_instead_of_this\", \"/given/default\"));\n      this.assertEquals(\"/registered\", this.__r._getPathOrFallback(\"/registered\"));\n    }\n  }\n});\n"
  ]
}