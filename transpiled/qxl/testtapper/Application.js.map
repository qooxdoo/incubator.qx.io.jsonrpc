{
  "version": 3,
  "sources": [
    "/home/runner/work/incubator.qx.io.jsonrpc/incubator.qx.io.jsonrpc/qx_packages/qooxdoo_qxl_testtapper_v0_5_2/source/class/qxl/testtapper/Application.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "application",
    "Standalone",
    "members",
    "_cnt",
    "_failed",
    "__tree",
    "__model",
    "log",
    "text",
    "console",
    "Logger",
    "debug",
    "info",
    "error",
    "addTreeItem",
    "status",
    "testNumber",
    "testClass",
    "testName",
    "message",
    "classNode",
    "getChildren",
    "toArray",
    "find",
    "item",
    "getLabel",
    "data",
    "marshal",
    "Json",
    "createModel",
    "label",
    "children",
    "numberPassed",
    "numberFailed",
    "append",
    "modelItem",
    "Number",
    "push",
    "forEach",
    "node",
    "setNumberPassed",
    "reduce",
    "acc",
    "curr",
    "getNumberPassed",
    "setNumberFailed",
    "getNumberFailed",
    "getRootNodeData",
    "main",
    "cfg",
    "location",
    "search",
    "params",
    "decodeURI",
    "substring",
    "split",
    "length",
    "key",
    "value",
    "main_container",
    "ui",
    "container",
    "Composite",
    "setLayout",
    "layout",
    "VBox",
    "add",
    "basic",
    "Label",
    "set",
    "rich",
    "getRoot",
    "edge",
    "scroller",
    "Scroll",
    "Grow",
    "tree",
    "VirtualTree",
    "delegate",
    "bindItem",
    "controller",
    "id",
    "bindDefaultProperties",
    "prop",
    "bindProperty",
    "createItem",
    "qxl",
    "testtapper",
    "TreeItem",
    "setDelegate",
    "model",
    "setModel",
    "logger",
    "logpane",
    "LogPane",
    "setShowToolBar",
    "fetch",
    "pane",
    "splitpane",
    "Pane",
    "flex",
    "loader",
    "dev",
    "unit",
    "TestLoaderBasic",
    "namespace",
    "setTestNamespace",
    "clazzes",
    "getSuite",
    "getTestClasses",
    "class",
    "matcher",
    "RegExp",
    "filter",
    "clazz",
    "getName",
    "match",
    "pChain",
    "Promise",
    "resolve",
    "then",
    "runAll",
    "setLabel",
    "that",
    "methods",
    "getTestMethods",
    "method",
    "testResult",
    "TestResult",
    "methodNameIndex",
    "next",
    "runTests",
    "showExceptions",
    "arr",
    "test",
    "getFullName",
    "String",
    "exception",
    "join",
    "setTimeout",
    "addListener",
    "evt",
    "getData",
    "Application"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,EAAAA,EAAE,CAACC,SAAH,CAAaC,oBAAb,CAAkCC,aAAlC;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAH,EAAAA,EAAE,CAACI,KAAH,CAASC,MAAT,CAAgB,4BAAhB,EAA8C;AAC5CC,IAAAA,MAAM,EAAEN,EAAE,CAACO,WAAH,CAAeC,UADqB;AAE5CC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE,IADC;AAEPC,MAAAA,OAAO,EAAE,IAFF;AAGPC,MAAAA,eAAM,EAAE,IAHD;AAIPC,MAAAA,gBAAO,EAAE,IAJF;AAKPC,MAAAA,GAAG,EAAE,aAASC,IAAT,EAAe;AAClBC,QAAAA,OAAO,CAACF,GAAR,CAAYC,IAAZ;AACAf,QAAAA,EAAE,CAACc,GAAH,CAAOG,MAAP,CAAcC,KAAd,CAAoBH,IAApB;AACD,OARM;AASPI,MAAAA,IAAI,EAAE,cAASJ,IAAT,EAAe;AACnBC,QAAAA,OAAO,CAACG,IAAR,CAAaJ,IAAb;AACAf,QAAAA,EAAE,CAACc,GAAH,CAAOG,MAAP,CAAcE,IAAd,CAAmBJ,IAAnB;AACD,OAZM;AAaPK,MAAAA,KAAK,EAAE,eAASL,IAAT,EAAe;AACpBC,QAAAA,OAAO,CAACI,KAAR,CAAcL,IAAd;AACAf,QAAAA,EAAE,CAACc,GAAH,CAAOG,MAAP,CAAcG,KAAd,CAAoBL,IAApB;AACD,OAhBM;AAkBP;AACAM,MAAAA,WAAW,EAAE,qBAASC,MAAT,EAAiBC,UAAjB,EAA6BC,SAA7B,EAAwCC,QAAxC,EAAkDC,OAAO,GAAC,EAA1D,EAA8D;AACzE,YAAIC,SAAS,GAAG,KAAKd,gBAAL,CAAae,WAAb,GAA2BC,OAA3B,GAAqCC,IAArC,CAA0CC,IAAI,IAAIA,IAAI,CAACC,QAAL,OAAoBR,SAAtE,CAAhB;;AACA,YAAI,CAACG,SAAL,EAAgB;AACdA,UAAAA,SAAS,GAAI3B,EAAE,CAACiC,IAAH,CAAQC,OAAR,CAAgBC,IAAhB,CAAqBC,WAArB,CAAiC;AAC5CC,YAAAA,KAAK,EAAEb,SADqC;AAE5Cc,YAAAA,QAAQ,EAAE,EAFkC;AAG5CC,YAAAA,YAAY,EAAE,CAH8B;AAI5CC,YAAAA,YAAY,EAAE;AAJ8B,WAAjC,CAAb;;AAMA,eAAK3B,gBAAL,CAAae,WAAb,GAA2Ba,MAA3B,CAAkCd,SAAlC;AACD;;AACD,YAAIe,SAAS,GAAI1C,EAAE,CAACiC,IAAH,CAAQC,OAAR,CAAgBC,IAAhB,CAAqBC,WAArB,CAAiC;AAChDC,UAAAA,KAAK,EAAEd,UAAU,GAAG,GAAb,GAAmBE,QADsB;AAEhDc,UAAAA,YAAY,EAAEI,MAAM,CAACrB,MAAM,KAAK,IAAZ,CAF4B;AAGhDkB,UAAAA,YAAY,EAAEG,MAAM,CAACrB,MAAM,KAAK,QAAZ,CAH4B;AAIhDI,UAAAA;AAJgD,SAAjC,CAAjB;AAMAC,QAAAA,SAAS,CAACC,WAAV,GAAwBgB,IAAxB,CAA6BF,SAA7B,EAjByE,CAkBzE;;AACA,SAACf,SAAD,EAAY,KAAKd,gBAAjB,EAA0BgC,OAA1B,CAAkCC,IAAI,IAAI;AACxCA,UAAAA,IAAI,CAACC,eAAL,CAAqBD,IAAI,CAAClB,WAAL,GAAmBoB,MAAnB,CAA0B,CAACC,GAAD,EAAKC,IAAL,KAAcD,GAAG,GAAGC,IAAI,CAACC,eAAL,EAA9C,EAAqE,CAArE,CAArB;AACAL,UAAAA,IAAI,CAACM,eAAL,CAAqBN,IAAI,CAAClB,WAAL,GAAmBoB,MAAnB,CAA0B,CAACC,GAAD,EAAKC,IAAL,KAAcD,GAAG,GAAGC,IAAI,CAACG,eAAL,EAA9C,EAAqE,CAArE,CAArB;AACD,SAHD;AAID,OA1CM;;AA4CPC,MAAAA,eAAe,GAAG;AAChB,eAAO;AACLjB,UAAAA,KAAK,EAAE,kBADF;AAELC,UAAAA,QAAQ,EAAE,EAFL;AAGLC,UAAAA,YAAY,EAAE,CAHT;AAILC,UAAAA,YAAY,EAAE;AAJT,SAAP;AAMD,OAnDM;;AAqDPe,MAAAA,IAAI,EAAE,gBAAW;AACf;AACA,aAAK7C,IAAL,GAAY,CAAZ;AACA,aAAKC,OAAL,GAAe,EAAf,CAHe,CAIf;;AACA,YAAI6C,GAAG,GAAG,EAAV;;AACA,YAAI,OAAOC,QAAP,KAAoB,WAApB,IAAmCA,QAAQ,CAACC,MAAhD,EAAwD;AACtD,cAAIC,MAAM,GAAGC,SAAS,CAACH,QAAQ,CAACC,MAAT,CAAgBG,SAAhB,CAA0B,CAA1B,CAAD,CAAtB;AACAF,UAAAA,MAAM,IAAI,GAAV;AACAA,UAAAA,MAAM,CAACG,KAAP,CAAa,GAAb,EAAkBjB,OAAlB,CAA0Bd,IAAI,IAAI;AAChC,gBAAIA,IAAI,CAACgC,MAAT,EAAiB;AACf,kBAAI,CAACC,GAAD,EAAKC,KAAL,IAAclC,IAAI,CAAC+B,KAAL,CAAW,GAAX,CAAlB;AACAN,cAAAA,GAAG,CAACQ,GAAD,CAAH,GAAWC,KAAX;AACD;AACF,WALD;AAMD;;AACD,YAAIC,cAAc,GAAG,IAAIlE,EAAE,CAACmE,EAAH,CAAMC,SAAN,CAAgBC,SAApB,EAArB;AACAH,QAAAA,cAAc,CAACI,SAAf,CAAyB,IAAItE,EAAE,CAACmE,EAAH,CAAMI,MAAN,CAAaC,IAAjB,EAAzB;AACAN,QAAAA,cAAc,CAACO,GAAf,CACE,IAAIzE,EAAE,CAACmE,EAAH,CAAMO,KAAN,CAAYC,KAAhB,CAAuB;AAC/B;AACA;AACA,iBAHQ,EAGWC,GAHX,CAGe;AACbC,UAAAA,IAAI,EAAE;AADO,SAHf,CADF;AAQA,aAAKC,OAAL,GAAeL,GAAf,CAAmBP,cAAnB,EAAmC;AAACa,UAAAA,IAAI,EAAC;AAAN,SAAnC,EA1Be,CA4Bf;;AACA,YAAIC,QAAQ,GAAG,IAAIhF,EAAE,CAACmE,EAAH,CAAMC,SAAN,CAAgBa,MAApB,EAAf;AACA,YAAIb,SAAS,GAAG,IAAIpE,EAAE,CAACmE,EAAH,CAAMC,SAAN,CAAgBC,SAApB,CAA8B,IAAIrE,EAAE,CAACmE,EAAH,CAAMI,MAAN,CAAaW,IAAjB,EAA9B,CAAhB,CA9Be,CA+Bf;AACA;;AACAF,QAAAA,QAAQ,CAACP,GAAT,CAAaL,SAAb;AACA,cAAMe,IAAI,GAAG,KAAKvE,eAAL,GAAc,IAAIZ,EAAE,CAACmE,EAAH,CAAMgB,IAAN,CAAWC,WAAf,CAA2B,IAA3B,EAAiC,OAAjC,EAA0C,UAA1C,CAA3B;AACAhB,QAAAA,SAAS,CAACK,GAAV,CAAcU,IAAd;AACA,cAAME,QAAQ,GAAG;AACfC,UAAAA,QAAQ,CAACC,UAAD,EAAaxD,IAAb,EAAmByD,EAAnB,EAAuB;AAC7BD,YAAAA,UAAU,CAACE,qBAAX,CAAiC1D,IAAjC,EAAuCyD,EAAvC;AACA,aAAC,cAAD,EAAiB,cAAjB,EAAiC,SAAjC,EACG3C,OADH,CACW6C,IAAI,IAAIH,UAAU,CAACI,YAAX,CAAwBD,IAAxB,EAA8BA,IAA9B,EAAoC,IAApC,EAA0C3D,IAA1C,EAAgDyD,EAAhD,CADnB;AAED,WALc;;AAMfI,UAAAA,UAAU,GAAG;AACX,mBAAO,IAAIC,GAAG,CAACC,UAAJ,CAAeC,QAAnB,EAAP;AACD;;AARc,SAAjB;AAUAZ,QAAAA,IAAI,CAACa,WAAL,CAAiBX,QAAjB;AACA,YAAIY,KAAK,GAAG,KAAKpF,gBAAL,GAAeb,EAAE,CAACiC,IAAH,CAAQC,OAAR,CAAgBC,IAAhB,CAAqBC,WAArB,CAAiC,KAAKkB,eAAL,EAAjC,EAAyD,IAAzD,CAA3B;AACA6B,QAAAA,IAAI,CAACe,QAAL,CAAcD,KAAd,EAhDe,CAkDf;;AACA,YAAIE,MAAM,GAAG,IAAIN,GAAG,CAACO,OAAJ,CAAYC,OAAhB,EAAb;AACAF,QAAAA,MAAM,CAACG,cAAP,CAAsB,KAAtB;AACAH,QAAAA,MAAM,CAACI,KAAP,GArDe,CAuDf;;AACA,YAAIC,IAAI,GAAG,IAAIxG,EAAE,CAACmE,EAAH,CAAMsC,SAAN,CAAgBC,IAApB,CAAyB,UAAzB,CAAX;AACAxC,QAAAA,cAAc,CAACO,GAAf,CAAmB+B,IAAnB,EAAyB;AAACG,UAAAA,IAAI,EAAC;AAAN,SAAzB;AACAH,QAAAA,IAAI,CAAC/B,GAAL,CAASO,QAAT;AACAwB,QAAAA,IAAI,CAAC/B,GAAL,CAAS0B,MAAT,EA3De,CA6Df;;AACA,aAAKS,MAAL,GAAc,IAAI5G,EAAE,CAAC6G,GAAH,CAAOC,IAAP,CAAYC,eAAhB,EAAd;AACA,YAAIC,SAAS,eAAb;AACA,aAAKJ,MAAL,CAAYK,gBAAZ,CAA6BD,SAA7B;AACA,YAAIE,OAAO,GAAG,KAAKN,MAAL,CAAYO,QAAZ,GAAuBC,cAAvB,EAAd;;AACA,YAAI5D,GAAG,CAAC6D,KAAR,EAAe;AACb,cAAIC,OAAO,GAAG,IAAIC,MAAJ,CAAW/D,GAAG,CAAC6D,KAAf,CAAd;AACA,eAAKvG,GAAL,CAAS,4CAA4CwG,OAArD;AACAJ,UAAAA,OAAO,GAAGA,OAAO,CAACM,MAAR,CAAeC,KAAK,IAAIA,KAAK,CAACC,OAAN,GAAgBC,KAAhB,CAAsBL,OAAtB,CAAxB,CAAV;AACD;;AAED,YAAIM,MAAM,GAAG,IAAI5H,EAAE,CAAC6H,OAAP,CAAgBC,OAAD,IAAaA,OAAO,CAAC,IAAD,CAAnC,CAAb;AACAZ,QAAAA,OAAO,CAACrE,OAAR,CACE4E,KAAK,IAAI;AACPG,UAAAA,MAAM,GAAGA,MAAM,CAACG,IAAP,CAAY,MACnB,KAAKC,MAAL,CAAYxE,GAAZ,EAAiBiE,KAAjB,EACGM,IADH,CACS,MAAM;AAAC,iBAAK5G,IAAL,CAAW,kBAAiBsG,KAAK,CAACC,OAAN,EAAgB,GAA5C;AACb,WAFH,CADO,CAAT;AAKD,SAPH;AAUA,eAAOE,MAAM,CAACG,IAAP,CAAY,MAAM;AACvB,eAAKjH,GAAL,CAAU,MAAK,KAAKJ,IAAK,EAAzB;;AACA,eAAKG,gBAAL,CAAaoH,QAAb,CAAsB,sBAAtB;AACD,SAHM,CAAP;AAID,OA5IM;AA8IPD,MAAAA,MAAM,EAAE,gBAASxE,GAAT,EAAciE,KAAd,EAAqB;AAC3B,YAAIS,IAAI,GAAG,IAAX;AACA,aAAK/G,IAAL,CAAW,mBAAkBsG,KAAK,CAACC,OAAN,EAAgB,GAA7C;AACA,YAAIS,OAAO,GAAGV,KAAK,CAACW,cAAN,EAAd;;AACA,YAAI5E,GAAG,CAAC6E,MAAR,EAAgB;AACd,cAAIf,OAAO,GAAG,IAAIC,MAAJ,CAAW/D,GAAG,CAAC6E,MAAf,CAAd;AACA,eAAKvH,GAAL,CAAS,4CAA4CwG,OAArD;AACAa,UAAAA,OAAO,GAAGA,OAAO,CAACX,MAAR,CAAea,MAAM,IAAIA,MAAM,CAACX,OAAP,GAAiBC,KAAjB,CAAuBL,OAAvB,CAAzB,CAAV;AACD;;AAED,eAAO,IAAItH,EAAE,CAAC6H,OAAP,CAAeC,OAAO,IAAI;AAC/B,cAAIQ,UAAU,GAAG,IAAItI,EAAE,CAAC6G,GAAH,CAAOC,IAAP,CAAYyB,UAAhB,EAAjB;AACA,cAAIC,eAAe,GAAG,CAAC,CAAvB;;AACA,cAAIC,IAAI,GAAG,MAAM;AACfD,YAAAA,eAAe;;AACf,gBAAIA,eAAe,GAAGL,OAAO,CAACpE,MAA9B,EAAsC;AACpCmE,cAAAA,IAAI,CAACtB,MAAL,CAAY8B,QAAZ,CACEJ,UADF,EAEEb,KAAK,CAACC,OAAN,EAFF,EAGES,OAAO,CAACK,eAAD,CAAP,CAAyBd,OAAzB,EAHF;AAKD,aAND,MAOK;AACHI,cAAAA,OAAO;AACR;AACF,WAZD;;AAaA,cAAIa,cAAc,GAAGC,GAAG,IAAI;AAC1BA,YAAAA,GAAG,CAAC/F,OAAJ,CAAYd,IAAI,IAAI;AAClB,kBAAIA,IAAI,CAAC8G,IAAL,CAAUC,WAAd,EAA0B;AACxB,oBAAID,IAAI,GAAG9G,IAAI,CAAC8G,IAAL,CAAUC,WAAV,EAAX;AACAZ,gBAAAA,IAAI,CAACvH,OAAL,CAAakI,IAAb,IAAqB,IAArB;AACAX,gBAAAA,IAAI,CAACxH,IAAL;AACA,oBAAIgB,OAAO,GAAGqH,MAAM,CAAChH,IAAI,CAACiH,SAAN,CAApB;;AACA,oBAAIjH,IAAI,CAACiH,SAAT,EAAoB;AAClB,sBAAIjH,IAAI,CAACiH,SAAL,CAAetH,OAAnB,EAA4B;AAC1BA,oBAAAA,OAAO,GAAGK,IAAI,CAACiH,SAAL,CAAetH,OAAzB;AACA,yBAAKP,IAAL,CAAW,UAAS+G,IAAI,CAACxH,IAAK,MAAKmI,IAAK,MAAKnH,OAAQ,EAArD;AACA,wBAAI,CAACF,SAAD,EAAY,GAAGC,QAAf,IAA2BoH,IAAI,CAAC/E,KAAL,CAAW,GAAX,CAA/B;AACA,yBAAKzC,WAAL,CAAiB,QAAjB,EAA0B6G,IAAI,CAACxH,IAA/B,EAAqCc,SAArC,EAAgDC,QAAQ,CAACwH,IAAT,CAAc,EAAd,CAAhD,EAAmEvH,OAAnE;AACD,mBALD,MAMK;AACH,yBAAKN,KAAL,CAAW,OAAKW,IAAI,CAACiH,SAArB;AACD;AACF;AACF,eAhBD,MAiBK;AACH,qBAAK5H,KAAL,CAAW,qBAAX,EAAiCW,IAAjC;AACD;AACF,aArBD;AAsBAmH,YAAAA,UAAU,CAACT,IAAD,EAAO,CAAP,CAAV;AACD,WAxBD;;AAyBAH,UAAAA,UAAU,CAACa,WAAX,CAAuB,WAAvB,EAAoCC,GAAG,IAAI;AACzC,iBAAKjI,IAAL,CAAU,aAAYiI,GAAG,CAACC,OAAJ,GAAcP,WAAd,EAAtB;AACD,WAFD;AAGAR,UAAAA,UAAU,CAACa,WAAX,CAAuB,MAAvB,EAA+BC,GAAG,IAAI;AACpC,iBAAKjI,IAAL,CAAU,YAAUiI,GAAG,CAACC,OAAJ,GAAcP,WAAd,EAApB;AACD,WAFD;AAGAR,UAAAA,UAAU,CAACa,WAAX,CAAuB,gBAAvB,EAAyCC,GAAG,IAAI;AAC9C,iBAAKjI,IAAL,CAAU,sBAAqBiI,GAAG,CAACC,OAAJ,GAAc,CAAd,EAAiBR,IAAjB,CAAsBC,WAAtB,EAA/B;AACD,WAFD;AAGAR,UAAAA,UAAU,CAACa,WAAX,CAAuB,SAAvB,EAAkCC,GAAG,IAAI;AACvC,gBAAIP,IAAI,GAAGO,GAAG,CAACC,OAAJ,GAAcP,WAAd,EAAX;;AACA,gBAAI,CAACZ,IAAI,CAACvH,OAAL,CAAakI,IAAb,CAAL,EAAwB;AACtBX,cAAAA,IAAI,CAACxH,IAAL;AACA,mBAAKS,IAAL,CAAW,MAAK+G,IAAI,CAACxH,IAAK,KAAhB,GAAuBmI,IAAjC;AACA,kBAAI,CAACrH,SAAD,EAAY,GAAGC,QAAf,IAA2BoH,IAAI,CAAC/E,KAAL,CAAW,GAAX,CAA/B;AACA,mBAAKzC,WAAL,CAAiB,IAAjB,EAAsB6G,IAAI,CAACxH,IAA3B,EAAiCc,SAAjC,EAA4CC,QAAQ,CAACwH,IAAT,CAAc,EAAd,CAA5C;AACD;;AACDC,YAAAA,UAAU,CAACT,IAAD,EAAO,CAAP,CAAV;AACD,WATD;AAUAH,UAAAA,UAAU,CAACa,WAAX,CAAuB,SAAvB,EAAkCC,GAAG,IAAIT,cAAc,CAACS,GAAG,CAACC,OAAJ,EAAD,CAAvD;AACAf,UAAAA,UAAU,CAACa,WAAX,CAAuB,OAAvB,EAAgCC,GAAG,IAAIT,cAAc,CAACS,GAAG,CAACC,OAAJ,EAAD,CAArD;AACAf,UAAAA,UAAU,CAACa,WAAX,CAAuB,MAAvB,EAA+BC,GAAG,IAAI;AACpClB,YAAAA,IAAI,CAACxH,IAAL;AACA,gBAAImI,IAAI,GAAGO,GAAG,CAACC,OAAJ,GAAc,CAAd,EAAiBR,IAAjB,CAAsBC,WAAtB,EAAX;AACAZ,YAAAA,IAAI,CAACvH,OAAL,CAAakI,IAAb,IAAqB,IAArB;AACA,iBAAK1H,IAAL,CAAW,MAAK+G,IAAI,CAACxH,IAAK,aAAYmI,IAAK,EAA3C;AACD,WALD;AAMAJ,UAAAA,IAAI;AACL,SArEM,CAAP;AAsED;AA9NM;AAFmC,GAA9C;AAlBA5C,EAAAA,GAAG,CAACC,UAAJ,CAAewD,WAAf,CAA2BnJ,aAA3B,GAA2CA,aAA3C",
  "sourcesContent": [
    "/* ************************************************************************\n\n   Copyright: 2018 Oetiker+Partner AG\n\n   License: MIT\n\n   Authors: Tobias Oetiker\n\n************************************************************************ */\n/**\n * Test Runner\n *\n * @asset(qxl/testtapper/run.js)\n * @asset(qx/icon/Oxygen/16/actions/dialog-ok.png)\n * @asset(qx/icon/Oxygen/16/actions/dialog-cancel.png)\n * @asset(qx/icon/Tango/16/places/folder.png)\n * @asset(qx/icon/Tango/16/places/folder-open.png)\n */\nqx.Class.define(\"qxl.testtapper.Application\", {\n  extend: qx.application.Standalone,\n  members: {\n    _cnt: null,\n    _failed: null,\n    __tree: null,\n    __model: null,\n    log: function(text) {\n      console.log(text);\n      qx.log.Logger.debug(text);\n    },\n    info: function(text) {\n      console.info(text);\n      qx.log.Logger.info(text);\n    },\n    error: function(text) {\n      console.error(text);\n      qx.log.Logger.error(text);\n    },\n\n    // add an item in the tree\n    addTreeItem: function(status, testNumber, testClass, testName, message=\"\") {\n      let classNode = this.__model.getChildren().toArray().find(item => item.getLabel() === testClass);\n      if (!classNode) {\n        classNode =  qx.data.marshal.Json.createModel({\n          label: testClass,\n          children: [],\n          numberPassed: 0,\n          numberFailed: 0\n        });\n        this.__model.getChildren().append(classNode);\n      }\n      let modelItem =  qx.data.marshal.Json.createModel({\n        label: testNumber + \" \" + testName,\n        numberPassed: Number(status === \"ok\"),\n        numberFailed: Number(status === \"not ok\"),\n        message\n      });\n      classNode.getChildren().push(modelItem);\n      // update parent nodes\n      [classNode, this.__model].forEach(node => {\n        node.setNumberPassed(node.getChildren().reduce((acc,curr) => acc + curr.getNumberPassed(),0));\n        node.setNumberFailed(node.getChildren().reduce((acc,curr) => acc + curr.getNumberFailed(),0));\n      });\n    },\n\n    getRootNodeData() {\n      return {\n        label: \"Running tests...\",\n        children: [],\n        numberPassed: 0,\n        numberFailed: 0\n      };\n    },\n\n    main: function() {\n      this.base(arguments);\n      this._cnt = 0;\n      this._failed = {};\n      // eslint-disable-next-line no-undef\n      let cfg = {};\n      if (typeof location !== \"undefined\" && location.search) {\n        let params = decodeURI(location.search.substring(1));\n        params += \"&\";\n        params.split('&').forEach(item => {\n          if (item.length) {\n            let [key,value] = item.split('=');\n            cfg[key] = value;\n          }\n        });\n      }\n      let main_container = new qx.ui.container.Composite();\n      main_container.setLayout(new qx.ui.layout.VBox());\n      main_container.add(\n        new qx.ui.basic.Label(`\n                <h1>TestTAPper - the Qooxdoo Testrunner is at work</h1>\n                <p>For details, please open your browser's javascript console</p>\n                `).set({\n          rich: true\n        })\n      );\n      this.getRoot().add(main_container, {edge:5});\n\n      // tree\n      var scroller = new qx.ui.container.Scroll();\n      var container = new qx.ui.container.Composite(new qx.ui.layout.Grow());\n      //container.setAllowGrowX(false);\n      //container.setAllowStretchX(false);\n      scroller.add(container);\n      const tree = this.__tree = new qx.ui.tree.VirtualTree(null, \"label\", \"children\");\n      container.add(tree);\n      const delegate = {\n        bindItem(controller, item, id) {\n          controller.bindDefaultProperties(item, id);\n          [\"numberPassed\", \"numberFailed\", \"message\"]\n            .forEach(prop => controller.bindProperty(prop, prop, null, item, id));\n        },\n        createItem() {\n          return new qxl.testtapper.TreeItem();\n        }\n      };\n      tree.setDelegate(delegate);\n      let model = this.__model = qx.data.marshal.Json.createModel(this.getRootNodeData(), true);\n      tree.setModel(model);\n\n      // log pane\n      let logger = new qxl.logpane.LogPane();\n      logger.setShowToolBar(false);\n      logger.fetch();\n\n      // splitpane\n      var pane = new qx.ui.splitpane.Pane(\"vertical\");\n      main_container.add(pane, {flex:1});\n      pane.add(scroller);\n      pane.add(logger);\n\n      // loader\n      this.loader = new qx.dev.unit.TestLoaderBasic();\n      let namespace = qx.core.Environment.get(\"testtapper.testNameSpace\") || \"qx.test\";\n      this.loader.setTestNamespace(namespace);\n      let clazzes = this.loader.getSuite().getTestClasses();\n      if (cfg.class) {\n        let matcher = new RegExp(cfg.class);\n        this.log(\"# running only test classes that match \" + matcher);\n        clazzes = clazzes.filter(clazz => clazz.getName().match(matcher));\n      }\n\n      let pChain = new qx.Promise((resolve) => resolve(true));\n      clazzes.forEach(\n        clazz => {\n          pChain = pChain.then(()=>\n            this.runAll(cfg, clazz)\n              .then( () => {this.info(`# done testing ${clazz.getName()}.`);\n              })\n          );\n        }\n      );\n\n      return pChain.then(() => {\n        this.log(`1..${this._cnt}`);\n        this.__model.setLabel(\"Tests have finished:\");\n      });\n    },\n\n    runAll: function(cfg, clazz) {\n      let that = this;\n      this.info(`# start testing ${clazz.getName()}.`);\n      let methods = clazz.getTestMethods();\n      if (cfg.method) {\n        let matcher = new RegExp(cfg.method);\n        this.log(\"# running only test methods that match \" + matcher);\n        methods = methods.filter(method => method.getName().match(matcher));\n      }\n\n      return new qx.Promise(resolve => {\n        let testResult = new qx.dev.unit.TestResult();\n        let methodNameIndex = -1;\n        let next = () => {\n          methodNameIndex++;\n          if (methodNameIndex < methods.length) {\n            that.loader.runTests(\n              testResult,\n              clazz.getName(),\n              methods[methodNameIndex].getName()\n            );\n          }\n          else {\n            resolve();\n          }\n        };\n        let showExceptions = arr => {\n          arr.forEach(item => {\n            if (item.test.getFullName){\n              let test = item.test.getFullName();\n              that._failed[test] = true;\n              that._cnt++;\n              let message = String(item.exception);\n              if (item.exception) {\n                if (item.exception.message) {\n                  message = item.exception.message;\n                  this.info(`not ok ${that._cnt} - ${test} - ${message}`);\n                  let [testClass, ...testName] = test.split(\":\");\n                  this.addTreeItem(\"not ok\",that._cnt, testClass, testName.join(\"\"), message);\n                }\n                else {\n                  this.error('# '+item.exception);\n                }\n              }\n            }\n            else {\n              this.error('Unexpected Error - ',item);\n            }\n          });\n          setTimeout(next, 0);\n        };\n        testResult.addListener(\"startTest\", evt => {\n          this.info('# start ' +evt.getData().getFullName());\n        });\n        testResult.addListener(\"wait\", evt => {\n          this.info('# wait '+evt.getData().getFullName());\n        });\n        testResult.addListener(\"endMeasurement\", evt => {\n          this.info('# endMeasurement '+ evt.getData()[0].test.getFullName());\n        });\n        testResult.addListener(\"endTest\", evt => {\n          let test = evt.getData().getFullName();\n          if (!that._failed[test]){\n            that._cnt++;\n            this.info(`ok ${that._cnt} - ` + test);\n            let [testClass, ...testName] = test.split(\":\");\n            this.addTreeItem(\"ok\",that._cnt, testClass, testName.join(\"\"));\n          }\n          setTimeout(next, 0);\n        });\n        testResult.addListener(\"failure\", evt => showExceptions(evt.getData()));\n        testResult.addListener(\"error\", evt => showExceptions(evt.getData()));\n        testResult.addListener(\"skip\", evt => {\n          that._cnt++;\n          let test = evt.getData()[0].test.getFullName();\n          that._failed[test] = true;\n          this.info(`ok ${that._cnt} - # SKIP ${test}`);\n        });\n        next();\n      });\n    }\n  }\n});\n"
  ]
}